<html xmlns:v="urn:schemas-microsoft-com:vml"xmlns:o="urn:schemas-microsoft-com:office:office"xmlns:w="urn:schemas-microsoft-com:office:word"xmlns="http://www.w3.org/TR/REC-html40"><head><meta name=Title content="3DVAR Tutorial"><meta name=Keywords content=""><meta http-equiv=Content-Type content="text/html; charset=utf-8"><meta name=ProgId content=Word.Document><meta name=Generator content="Microsoft Word 10"><meta name=Originator content="Microsoft Word 10"><link rel=File-List href="wrfvar-casestudy_files/filelist.xml"><link rel=Edit-Time-Data href="wrfvar-casestudy_files/editdata.mso"><!--[if !mso]><style>v\:* {behavior:url(#default#VML);}o\:* {behavior:url(#default#VML);}w\:* {behavior:url(#default#VML);}.shape {behavior:url(#default#VML);}</style><![endif]--><title>3DVAR Tutorial</title><!--[if gte mso 9]><xml> <o:DocumentProperties>  <o:Author>dmbarker</o:Author>  <o:Template>Normal</o:Template>  <o:LastAuthor>Jose Castilleja</o:LastAuthor>  <o:Revision>2</o:Revision>  <o:Created>2005-08-05T23:37:00Z</o:Created>  <o:LastSaved>2005-08-05T23:37:00Z</o:LastSaved>  <o:Pages>4</o:Pages>  <o:Words>470</o:Words>  <o:Characters>2680</o:Characters>  <o:Company>NCAR/UCAR</o:Company>  <o:Lines>22</o:Lines>  <o:Paragraphs>5</o:Paragraphs>  <o:CharactersWithSpaces>3291</o:CharactersWithSpaces>  <o:Version>10.260</o:Version> </o:DocumentProperties> <o:OfficeDocumentSettings>  <o:AllowPNG/> </o:OfficeDocumentSettings></xml><![endif]--><style><!-- /* Font Definitions */@font-face	{font-family:"Times New Roman";	panose-1:0 2 2 6 3 5 4 5 2 3;	mso-font-charset:0;	mso-generic-font-family:auto;	mso-font-pitch:variable;	mso-font-signature:50331648 0 0 0 1 0;}@font-face	{font-family:Arial;	panose-1:0 2 11 6 4 2 2 2 2 2;	mso-font-charset:0;	mso-generic-font-family:auto;	mso-font-pitch:variable;	mso-font-signature:50331648 0 0 0 1 0;}@font-face	{font-family:"Courier New";	panose-1:0 0 0 0 0 0 0 0 0 0;	mso-font-alt:Courier;	mso-font-charset:77;	mso-generic-font-family:modern;	mso-font-format:other;	mso-font-pitch:fixed;	mso-font-signature:50331648 0 0 0 1 0;} /* Style Definitions */p.MsoNormal, li.MsoNormal, div.MsoNormal	{mso-style-parent:"";	margin:0in;	margin-bottom:.0001pt;	mso-pagination:widow-orphan;	font-size:12.0pt;	font-family:"Times New Roman";	color:black;}h2	{margin-right:0in;	mso-margin-top-alt:auto;	mso-margin-bottom-alt:auto;	margin-left:0in;	mso-pagination:widow-orphan;	mso-outline-level:2;	font-size:18.0pt;	font-family:"Times New Roman";	color:black;	font-weight:bold;}a:link, span.MsoHyperlink	{color:#0000EE;	text-decoration:underline;	text-underline:single;}a:visited, span.MsoHyperlinkFollowed	{color:#551A8B;	text-decoration:underline;	text-underline:single;}p.MsoPlainText, li.MsoPlainText, div.MsoPlainText	{margin:0in;	margin-bottom:.0001pt;	mso-pagination:widow-orphan;	font-size:10.0pt;	font-family:"Courier New";	color:windowtext;}p	{margin-right:0in;	mso-margin-top-alt:auto;	mso-margin-bottom-alt:auto;	margin-left:0in;	mso-pagination:widow-orphan;	font-size:12.0pt;	font-family:"Times New Roman";	color:black;}tt {}@page Section1	{size:8.5in 11.0in;	margin:1.0in 1.25in 1.0in 1.25in;	mso-header-margin:.5in;	mso-footer-margin:.5in;	mso-paper-source:0;}div.Section1	{page:Section1;}--></style><!--[if gte mso 9]><xml> <o:shapedefaults v:ext="edit" spidmax="2050"/></xml><![endif]--><!--[if gte mso 9]><xml> <o:shapelayout v:ext="edit">  <o:idmap v:ext="edit" data="1"/> </o:shapelayout></xml><![endif]--></head><body bgcolor=white lang=EN-GB link="#0000ee" vlink="#551a8b" style='tab-interval:.5in'><div class=Section1><h2 style='text-align:justify'><span lang=EN-US style='font-family:Arial;color:blue'>d. Run WRF-Var CONUS Case Study</span></h2><p style='text-align:justify'><span lang=EN-US style='font-family:Arial'>Inthis section, you will learn how to run WRF-Var using observations and a firstguess from a low-resolution (200km) CONUS domain (see below). <o:p></o:p></span></p><p style='text-align:justify'><span lang=EN-US style='font-family:Arial'>Bythis stage you have successfully created the three input files (first guess,observation and background error statistics files in directory <i>$DAT_DIR</i></span><spanlang=EN-US style='font-family:Arial'>) required to run WRF-Var. Also, you havesuccessfully downloaded and compiled the WRF-Var code. If this is correct, weare ready to learn how to run WRF-Var. If not, then you'll need to return tothe <a href="wrfvar-tutorial.htm">WRF-Var Tutorial Page</a> to complete stages </span><spanlang=EN-US style='font-family:Arial;color:blue'>a.</span><span lang=EN-USstyle='font-family:Arial'> to </span><span lang=EN-US style='font-family:Arial;color:blue'>c.<o:p></o:p></span></p><p style='text-align:justify'><span lang=EN-US style='font-family:Arial'><b><u>i.The Case</u></b></span><span lang=EN-US><u><o:p></o:p></u></span></p><p style='text-align:justify'><span lang=EN-US style='font-family:Arial'>Thedata for this case is valid at 12 UTC 1<sup>st</sup> January 2003. The firstguess comes from the NCEP global assimilation system (SSI), passed through theWRF <i>Standard Initialization (SI)</i></span><span lang=EN-USstyle='font-family:Arial'> and <i>real</i></span><span lang=EN-USstyle='font-family:Arial'> packages. The first-guess level 15 potentialtemperature field is shown below, illustrating the domain:<o:p></o:p></span></p><p style='text-align:justify'><!--[if gte vml 1]><v:shapetype id="_x0000_t75" coordsize="21600,21600" o:spt="75" o:preferrelative="t" path="m@4@5l@4@11@9@11@9@5xe" filled="f" stroked="f"> <v:stroke joinstyle="miter"/> <v:formulas>  <v:f eqn="if lineDrawn pixelLineWidth 0"/>  <v:f eqn="sum @0 1 0"/>  <v:f eqn="sum 0 0 @1"/>  <v:f eqn="prod @2 1 2"/>  <v:f eqn="prod @3 21600 pixelWidth"/>  <v:f eqn="prod @3 21600 pixelHeight"/>  <v:f eqn="sum @0 0 1"/>  <v:f eqn="prod @6 1 2"/>  <v:f eqn="prod @7 21600 pixelWidth"/>  <v:f eqn="sum @8 21600 0"/>  <v:f eqn="prod @7 21600 pixelHeight"/>  <v:f eqn="sum @10 21600 0"/> </v:formulas> <v:path o:extrusionok="f" gradientshapeok="t" o:connecttype="rect"/> <o:lock v:ext="edit" aspectratio="t"/></v:shapetype><v:shape id="_x0000_s1027" type="#_x0000_t75" style='position:absolute; left:0;text-align:left;margin-left:39pt;margin-top:2.2pt;width:330pt;height:303.7pt; z-index:1'> <v:imagedata src="wrfvar-casestudy_files/image001.png" o:title="wrfinput_d01.2003010#2AAF20.gif"  croptop="17873f" cropbottom="11916f" cropleft="7710f" cropright="7710f"/> <w:wrap type="square" side="right"/></v:shape><![endif]--><![if !vml]><img width=330 height=304src="wrfvar-casestudy_files/image002.png" align=left hspace=9 v:shapes="_x0000_s1027"><![endif]><spanstyle='font-family:Arial'><span lang=EN-US><o:p></o:p></span></span></p><p style='text-align:justify'><span lang=EN-US style='font-family:Arial'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></span></p><p style='text-align:justify'><span lang=EN-US style='font-family:Arial'><brclear=ALL style='mso-special-character:line-break'><o:p></o:p></span></p><p style='text-align:justify'><span lang=EN-US style='font-family:Arial'>Theintention of running this test-case is to provide a simplified, computationallycheap application in order to train potential uses of WRF-Var (this case usesonly a small fraction of WRF-Var capabilities). To simplify the system further,only radiosonde observations are assimilated.<o:p></o:p></span></p><p style='text-align:justify'><span lang=EN-US style='font-family:Arial'><b><u>ii.Required 3D-Var namelist changes</u></b></span><span lang=EN-US><u> <o:p></o:p></u></span></p><p style='text-align:justify'><span lang=EN-US style='font-family:Arial'>Youwill need to download the script<i><ahref="http://www.mmm.ucar.edu/wrf/WG4/wrfvar/DA_Run_WRF-Var.csh.txt">DA_Run_WRF-Var.csh</a></i></span><spanlang=EN-US style='font-family:Arial'> and <STRONG>USE IT TO OVERWRITE THE FILE DA_Run_WRF-Var.csh IN SUBDIRECTORY run</STRONG>. Openthis script with your favorite editor, and spend some time browsing it toaccustom yourself with the layout. Don't despair, in this tutorial we will notbe changing too much in here. See <a href="wrfvar-setup.htm">c. Setting UpWRF-Var</a> for more information on the various namelist options. <o:p></o:p></span></p><p style='text-align:justify'><span lang=EN-US style='font-family:Arial'>Inyour first experiment, the only changes you need to make to the <i>DA_Run_WRF-Var.csh</i></span><spanlang=EN-US style='font-family:Arial'> script are to specify the DAT_DIR (inputdata directory), WRFVAR_DIR (WRF-Var code directory) and RUN_DIR (where the run happens)environment variables. <o:p></o:p></span></p><p style='text-align:justify'><span lang=EN-US style='font-family:Arial'><b><u>iii.Run 3D-Var</u></b></span><span lang=EN-US><u> <o:p></o:p></u></span></p><p style='text-align:justify'><span lang=EN-US style='font-family:Arial'>Onceyou have set the necessary environment variables, run WRF-Var for this casestudy by typing <o:p></o:p></span></p><p style='text-align:justify'><span lang=EN-US style='font-family:Arial'><b>DA_Run_WRF-VAR.csh<o:p></o:p></b></span></p><p style='text-align:justify'><span lang=EN-US style='font-family:Arial'>in therun subdirectory. (ignore any messages about hosts files)<o:p></o:p></span></p><p style='text-align:justify'><span lang=EN-US style='font-family:Arial'>Successfulcompletion of the job results in a number of output diagnostics files in the${RUN_DIR}/wrf-var subdirectory 2 levels above. The various textual diagnostics output fileswill be explained in the next section (<a href="wrfvar-diagnostics.htm">WRF-VarDiagnostics</a>). Here, we merely wish to run WRF-Var for this case.<o:p></o:p></span></p><p style='text-align:justify'><span lang=EN-US style='font-family:Arial'>Inorder to give yourself more experience with some of the 3D-Var options, tryrerunning 3D-Var with different namelist.3dvar options. For example, making theWRF-Var convergence criteria more stringent by reducing the first value in the DA_EPSarray toe.g. 0.001. If WRF-Var has not converged by the maximum number of iterations(DA_NTMAX) then you may need to increase DA_NTMAX.<o:p></o:p></span></p><p style='text-align:justify'><span lang=EN-US style='font-family:Arial'>Youmay wish to change the RUN_DIR environment variable if you want to save all theoutputs.<b><u><o:p></o:p></u></b></span></p><p style='text-align:justify'><span lang=EN-US style='font-family:Arial'><b><u>v.What next?</u></b></span><span lang=EN-US><u><o:p></o:p></u></span></p><p style='text-align:justify'><span lang=EN-US style='font-family:Arial'>Havingrun WRF-Var, you should now spend time looking at some of the diagnostic outputfiles created by WRF-Var:<o:p></o:p></span></p><p style='text-align:justify'><span lang=EN-US style='font-family:Arial'><u><ahref="wrfvar-diagnostics.htm"><span style='color:blue'>e) WRF-Var Diagnostics</span></a></u><o:p></o:p></span></p><div class=MsoNormal align=center style='text-align:center'><span lang=EN-US><hr size=2 width="100%" align=center></span></div><p><span lang=EN-US style='font-family:Arial'><b>Miscellanies:</b></span><spanlang=EN-US>&nbsp; </span></p><div class=MsoNormal align=center style='text-align:center'><span lang=EN-US><hr size=2 width="100%" align=center></span></div><p><span lang=EN-US style='font-family:Arial'><b>Trouble Shooting:</b></span><spanlang=EN-US> </span><span lang=EN-US style='font-family:Arial'>If you havequestions, ask </span><span lang=EN-US style='font-family:Arial;color:#000099'><ahref="mailto:wrfhelp@wrf-model.org"><span style='font-family:"Times New Roman"'>wrfhelp@wrf-model.org</span></a></span><spanlang=EN-US> </span></p><div class=MsoNormal align=center style='text-align:center'><span lang=EN-US><hr size=2 width="100%" align=center></span></div><p class=MsoNormal align=center style='text-align:center'><span lang=EN-USstyle='font-family:Arial'><a href="wrfvar-tutorial.htm">WRF-Var Tutorial Page</a></span><spanlang=EN-US style='color:windowtext'><o:p></o:p></span></p></div></body></html>