<html xmlns:v="urn:schemas-microsoft-com:vml"xmlns:o="urn:schemas-microsoft-com:office:office"xmlns:w="urn:schemas-microsoft-com:office:word"xmlns="http://www.w3.org/TR/REC-html40"><head><meta name=Title content="3DVAR Tutorial"><meta name=Keywords content=""><meta http-equiv=Content-Type content="text/html; charset=utf-8"><meta name=ProgId content=Word.Document><meta name=Generator content="Microsoft Word 10"><meta name=Originator content="Microsoft Word 10"><link rel=File-List href="wrfvar-setup_files/filelist.xml"><link rel=Edit-Time-Data href="wrfvar-setup_files/editdata.mso"><!--[if !mso]><style>v\:* {behavior:url(#default#VML);}o\:* {behavior:url(#default#VML);}w\:* {behavior:url(#default#VML);}.shape {behavior:url(#default#VML);}</style><![endif]--><title>3DVAR Tutorial</title><!--[if gte mso 9]><xml> <o:DocumentProperties>  <o:Author>dmbarker</o:Author>  <o:Template>Normal</o:Template>  <o:LastAuthor>Jose Castilleja</o:LastAuthor>  <o:Revision>2</o:Revision>  <o:Created>2005-08-05T23:38:00Z</o:Created>  <o:LastSaved>2005-08-05T23:38:00Z</o:LastSaved>  <o:Pages>6</o:Pages>  <o:Words>1134</o:Words>  <o:Characters>6469</o:Characters>  <o:Company>NCAR/UCAR</o:Company>  <o:Lines>53</o:Lines>  <o:Paragraphs>12</o:Paragraphs>  <o:CharactersWithSpaces>7944</o:CharactersWithSpaces>  <o:Version>10.260</o:Version> </o:DocumentProperties> <o:OfficeDocumentSettings>  <o:AllowPNG/> </o:OfficeDocumentSettings></xml><![endif]--><style><!-- /* Font Definitions */@font-face	{font-family:"Times New Roman";	panose-1:0 2 2 6 3 5 4 5 2 3;	mso-font-charset:0;	mso-generic-font-family:auto;	mso-font-pitch:variable;	mso-font-signature:50331648 0 0 0 1 0;}@font-face	{font-family:Arial;	panose-1:0 2 11 6 4 2 2 2 2 2;	mso-font-charset:0;	mso-generic-font-family:auto;	mso-font-pitch:variable;	mso-font-signature:50331648 0 0 0 1 0;}@font-face	{font-family:"Courier New";	panose-1:0 0 0 0 0 0 0 0 0 0;	mso-font-alt:Courier;	mso-font-charset:77;	mso-generic-font-family:modern;	mso-font-format:other;	mso-font-pitch:fixed;	mso-font-signature:50331648 0 0 0 1 0;}@font-face	{font-family:"ＭＳ 明朝";	panose-1:0 0 0 0 0 0 0 0 0 0;	mso-font-charset:128;	mso-generic-font-family:roman;	mso-font-format:other;	mso-font-pitch:fixed;	mso-font-signature:16777216 1800 268435456 0 131072 0;} /* Style Definitions */p.MsoNormal, li.MsoNormal, div.MsoNormal	{mso-style-parent:"";	margin:0in;	margin-bottom:.0001pt;	mso-pagination:widow-orphan;	font-size:12.0pt;	font-family:"Times New Roman";	color:black;}h2	{margin-right:0in;	mso-margin-top-alt:auto;	mso-margin-bottom-alt:auto;	margin-left:0in;	mso-pagination:widow-orphan;	mso-outline-level:2;	font-size:18.0pt;	font-family:"Times New Roman";	color:black;	font-weight:bold;}a:link, span.MsoHyperlink	{color:#0000EE;	text-decoration:underline;	text-underline:single;}a:visited, span.MsoHyperlinkFollowed	{color:#551A8B;	text-decoration:underline;	text-underline:single;}p.MsoPlainText, li.MsoPlainText, div.MsoPlainText	{margin:0in;	margin-bottom:.0001pt;	mso-pagination:widow-orphan;	font-size:10.0pt;	font-family:"Courier New";	color:windowtext;}p	{margin-right:0in;	mso-margin-top-alt:auto;	mso-margin-bottom-alt:auto;	margin-left:0in;	mso-pagination:widow-orphan;	font-size:12.0pt;	font-family:"Times New Roman";	color:black;}tt {}@page Section1	{size:8.5in 11.0in;	margin:1.0in 1.25in 1.0in 1.25in;	mso-header-margin:.5in;	mso-footer-margin:.5in;	mso-paper-source:0;}div.Section1	{page:Section1;} /* List Definitions */@list l0	{mso-list-id:1433359989;	mso-list-type:hybrid;	mso-list-template-ids:923304026 67698711 67698713 67698715 67698703 67698713 67698715 67698703 67698713 67698715;}@list l0:level1	{mso-level-number-format:alpha-lower;	mso-level-text:"%1\)";	mso-level-tab-stop:.5in;	mso-level-number-position:left;	text-indent:-.25in;}ol	{margin-bottom:0in;}ul	{margin-bottom:0in;}--></style><!--[if gte mso 9]><xml> <o:shapedefaults v:ext="edit" spidmax="2050"/></xml><![endif]--><!--[if gte mso 9]><xml> <o:shapelayout v:ext="edit">  <o:idmap v:ext="edit" data="1"/> </o:shapelayout></xml><![endif]--></head><body bgcolor=white lang=EN-GB link="#0000ee" vlink="#551a8b" style='tab-interval:.5in'><div class=Section1><p style='text-align:justify'><span lang=EN-US style='font-size:18.0pt;font-family:Arial;color:blue'><b>c. Setting up WRF-Var<o:p></o:p></b></span></p><p style='text-align:justify'><span lang=EN-US style='font-family:Arial'><b><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></b></span></p><p style='text-align:justify'><span lang=EN-US style='font-family:Arial'>Inthis part of the tutorial you will download and compile the WRF-Var code. Adescription of the script that controls the running of WRF-Var and an overviewof the namelist that it creates is also given.<o:p></o:p></span></p><p style='text-align:justify'><span lang=EN-US style='font-family:Arial'><b><u>i.Accessing WRF-Var code</u></b></span><span lang=EN-US><u> <o:p></o:p></u></span></p><p style='text-align:justify'><span lang=EN-US style='font-family:Arial'>First,go to your working directory and download the WRF-Var code from<o:p></o:p></span></p><p style='text-align:justify'><span lang=EN-US style='font-family:Arial'><ahref="http://www.mmm.ucar.edu/wrf/src/wrfvar_v2.1.tar.gz">http://www.mmm.ucar.edu/wrf/src/wrfvar_v2.1.tar.gz</a><o:p></o:p></span></p><p style='text-align:justify'><span lang=EN-US style='font-family:Arial'>Onceyou have it on your machine, type the following to unzip and untar it:</span><spanlang=EN-US> </span></p><p style='text-align:justify'><span lang=EN-US style='font-family:Arial'><b>gunzipwrfvar.tar.gz<o:p></o:p></b></span></p><p style='text-align:justify'><span lang=EN-US style='font-family:Arial'><b>tar-xvf wrfvar.tar</b></span><span lang=EN-US> </span></p><p style='text-align:justify'><span lang=EN-US style='font-family:Arial'>Afterthis, you should see a program directory wrfvar/ created in your workingdirectory. If so, tidy up with the command<o:p></o:p></span></p><p style='text-align:justify'><span lang=EN-US style='font-family:Arial'><b>rmwrfvar.tar<o:p></o:p></b></span></p><p style='text-align:justify'><span lang=EN-US style='font-family:Arial'>cd tothe wrfvar directory:</span><span lang=EN-US> </span></p><p style='text-align:justify'><span lang=EN-US style='font-family:Arial'><b>cdwrfvar</b></span></p><p style='text-align:justify'><span lang=EN-US style='font-family:Arial'>andyou should see something like the following files and subdirectories listed(may be slightly different depending on version used):</span><span lang=EN-US> </span></p><p style='text-align:justify'><span lang=EN-US style='font-family:Arial'><b>ls-l <o:p></o:p></b></span></p><p class=MsoPlainText><span lang=EN-US>total 160<o:p></o:p></span></p><p class=MsoPlainText><span lang=EN-US>-rw-r--r--<span style="mso-spacerun:yes">&nbsp;&nbsp; </span>1 dmbarker<span style="mso-spacerun: yes">&nbsp;</span>users<span style="mso-spacerun: yes">&nbsp; </span>15895 11 Jul 14:39Makefile<o:p></o:p></span></p><p class=MsoPlainText><span lang=EN-US>-rw-r--r--<span style="mso-spacerun:yes">&nbsp;&nbsp; </span>1 dmbarker<span style="mso-spacerun: yes">&nbsp;</span>users<span style="mso-spacerun: yes">&nbsp;&nbsp; </span>7189<spanstyle="mso-spacerun: yes">&nbsp; </span>4 Feb 07:40 README<o:p></o:p></span></p><p class=MsoPlainText><span lang=EN-US>-rw-r--r--<span style="mso-spacerun:yes">&nbsp;&nbsp; </span>1 dmbarker<span style="mso-spacerun: yes">&nbsp;</span>users<span style="mso-spacerun: yes">&nbsp;&nbsp; </span>7263 11 Jul14:39 README.NMM<o:p></o:p></span></p><p class=MsoPlainText><span lang=EN-US>-rw-r--r--<span style="mso-spacerun:yes">&nbsp;&nbsp; </span>1 dmbarker<span style="mso-spacerun: yes">&nbsp;</span>users<span style="mso-spacerun: yes">&nbsp;&nbsp; </span>2548 18Jan<span style="mso-spacerun: yes">&nbsp; </span>2005 README_test_cases<o:p></o:p></span></p><p class=MsoPlainText><span lang=EN-US>drwxr-xr-x<span style="mso-spacerun:yes">&nbsp;&nbsp; </span>3 dmbarker<span style="mso-spacerun: yes">&nbsp;</span>users<span style="mso-spacerun: yes">&nbsp;&nbsp; </span>1024 27 Jul08:55 Registry<o:p></o:p></span></p><p class=MsoPlainText><span lang=EN-US>drwxr-xr-x<span style="mso-spacerun:yes">&nbsp;&nbsp; </span>3 dmbarker<span style="mso-spacerun: yes">&nbsp;</span>users<span style="mso-spacerun: yes">&nbsp;&nbsp; </span>1024 27 Jul08:55 arch<o:p></o:p></span></p><p class=MsoPlainText><span lang=EN-US>drwxr-xr-x<span style="mso-spacerun:yes">&nbsp;&nbsp; </span>3 dmbarker<span style="mso-spacerun: yes">&nbsp;</span>users<span style="mso-spacerun: yes">&nbsp;&nbsp; </span>1024 27 Jul08:55 chem<o:p></o:p></span></p><p class=MsoPlainText><span lang=EN-US>-rwxr-xr-x<span style="mso-spacerun:yes">&nbsp;&nbsp; </span>1 dmbarker<span style="mso-spacerun: yes">&nbsp;</span>users<span style="mso-spacerun: yes">&nbsp;&nbsp; </span>1656 15 Apr11:45 clean<o:p></o:p></span></p><p class=MsoPlainText><span lang=EN-US>-rwxr-xr-x<span style="mso-spacerun:yes">&nbsp;&nbsp; </span>1 dmbarker<span style="mso-spacerun: yes">&nbsp;</span>users<span style="mso-spacerun: yes">&nbsp;&nbsp; </span>7225 25 Jul09:48 compile<o:p></o:p></span></p><p class=MsoPlainText><span lang=EN-US>-rwxr-xr-x<span style="mso-spacerun:yes">&nbsp;&nbsp; </span>1 dmbarker<span style="mso-spacerun: yes">&nbsp;</span>users<span style="mso-spacerun: yes">&nbsp; </span>10664 25 Jul 18:49configure<o:p></o:p></span></p><p class=MsoPlainText><span lang=EN-US>drwxr-xr-x<span style="mso-spacerun:yes">&nbsp;&nbsp; </span>7 dmbarker<span style="mso-spacerun: yes">&nbsp;</span>users<span style="mso-spacerun: yes">&nbsp;&nbsp; </span>1024 27 Jul 08:55convertor<o:p></o:p></span></p><p class=MsoPlainText><span lang=EN-US>drwxr-xr-x<span style="mso-spacerun:yes">&nbsp;&nbsp; </span>6 dmbarker<span style="mso-spacerun: yes">&nbsp;</span>users<span style="mso-spacerun: yes">&nbsp;&nbsp; </span>1024 27 Jul08:55 da_3dvar<o:p></o:p></span></p><p class=MsoPlainText><span lang=EN-US>drwxr-xr-x<span style="mso-spacerun:yes">&nbsp;&nbsp; </span>3 dmbarker<span style="mso-spacerun: yes">&nbsp;</span>users<span style="mso-spacerun: yes">&nbsp;&nbsp; </span>1024 27 Jul08:55 dyn_em<o:p></o:p></span></p><p class=MsoPlainText><span lang=EN-US>drwxr-xr-x<span style="mso-spacerun:yes">&nbsp;&nbsp; </span>3 dmbarker<span style="mso-spacerun: yes">&nbsp;</span>users<span style="mso-spacerun: yes">&nbsp;&nbsp; </span>1024 27 Jul08:55 dyn_exp<o:p></o:p></span></p><p class=MsoPlainText><span lang=EN-US>drwxr-xr-x<span style="mso-spacerun:yes">&nbsp;&nbsp; </span>3 dmbarker<span style="mso-spacerun: yes">&nbsp;</span>users<span style="mso-spacerun: yes">&nbsp;&nbsp; </span>2048 27 Jul08:55 dyn_nmm<o:p></o:p></span></p><p class=MsoPlainText><span lang=EN-US>drwxr-xr-x<span style="mso-spacerun:yes">&nbsp; </span>14 dmbarker<span style="mso-spacerun: yes">&nbsp;</span>users<span style="mso-spacerun: yes">&nbsp;&nbsp; </span>1024 27 Jul08:55 external<o:p></o:p></span></p><p class=MsoPlainText><span lang=EN-US>drwxr-xr-x<span style="mso-spacerun:yes">&nbsp;&nbsp; </span>3 dmbarker<span style="mso-spacerun: yes">&nbsp;</span>users<span style="mso-spacerun: yes">&nbsp;&nbsp; </span>1024 27 Jul08:55 frame<o:p></o:p></span></p><p class=MsoPlainText><span lang=EN-US>drwxr-xr-x<span style="mso-spacerun:yes">&nbsp;&nbsp; </span>3 dmbarker<span style="mso-spacerun: yes">&nbsp;</span>users<span style="mso-spacerun: yes">&nbsp;&nbsp; </span>1024 27 Jul08:55 gen_be<o:p></o:p></span></p><p class=MsoPlainText><span lang=EN-US>drwxr-xr-x<span style="mso-spacerun:yes">&nbsp;&nbsp; </span>3 dmbarker<span style="mso-spacerun: yes">&nbsp;</span>users<span style="mso-spacerun: yes">&nbsp;&nbsp; </span>1024 27 Jul08:55 inc<o:p></o:p></span></p><p class=MsoPlainText><span lang=EN-US>drwxr-xr-x<span style="mso-spacerun:yes">&nbsp;&nbsp; </span>3 dmbarker<span style="mso-spacerun: yes">&nbsp;</span>users<span style="mso-spacerun: yes">&nbsp;&nbsp; </span>1024 27 Jul08:55 main<o:p></o:p></span></p><p class=MsoPlainText><span lang=EN-US>drwxr-xr-x<span style="mso-spacerun:yes">&nbsp;&nbsp; </span>3 dmbarker<span style="mso-spacerun: yes">&nbsp;</span>users<span style="mso-spacerun: yes">&nbsp;&nbsp; </span>2048 27 Jul08:55 phys<o:p></o:p></span></p><p class=MsoPlainText><span lang=EN-US>drwxr-xr-x<span style="mso-spacerun:yes">&nbsp;&nbsp; </span>4 dmbarker<span style="mso-spacerun: yes">&nbsp;</span>users<span style="mso-spacerun: yes">&nbsp;&nbsp; </span>1024 27 Jul08:56 run<o:p></o:p></span></p><p class=MsoPlainText><span lang=EN-US>drwxr-xr-x<span style="mso-spacerun:yes">&nbsp;&nbsp; </span>3 dmbarker<span style="mso-spacerun: yes">&nbsp;</span>users<span style="mso-spacerun: yes">&nbsp;&nbsp; </span>1024 27 Jul08:55 scripts<o:p></o:p></span></p><p class=MsoPlainText><span lang=EN-US>drwxr-xr-x<span style="mso-spacerun:yes">&nbsp;&nbsp; </span>3 dmbarker<span style="mso-spacerun: yes">&nbsp;</span>users<span style="mso-spacerun: yes">&nbsp;&nbsp; </span>2048 27 Jul08:55 share<o:p></o:p></span></p><p class=MsoPlainText><span lang=EN-US>drwxr-xr-x<span style="mso-spacerun:yes">&nbsp; </span>12 dmbarker<span style="mso-spacerun: yes">&nbsp;</span>users<span style="mso-spacerun: yes">&nbsp;&nbsp; </span>1024 27 Jul08:55 test<o:p></o:p></span></p><p class=MsoPlainText><span lang=EN-US>drwxr-xr-x<span style="mso-spacerun:yes">&nbsp;&nbsp; </span>4 dmbarker<span style="mso-spacerun: yes">&nbsp;</span>users<span style="mso-spacerun: yes">&nbsp;&nbsp; </span>2048 27 Jul08:55 tools<o:p></o:p></span></p><p class=MsoPlainText><span lang=EN-US><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></span></p><p style='text-align:justify'><span lang=EN-US style='font-family:Arial'><b><u>ii.Compiling WRF-Var</u></b></span><span lang=EN-US><u><o:p></o:p></u></span></p><p style='text-align:justify'><span lang=EN-US style='font-family:Arial'>Tobegin the compilation of WRF-Var, type the following to see the optionsavailable to you:<o:p></o:p></span></p><p style='text-align:justify'><span lang=EN-US style='font-family:Arial'><b>configure<o:p></o:p></b></span></p><p style='text-align:justify'><span lang=EN-US style='font-family:Arial'>Youwill then be queried with something like the following:<o:p></o:p></span></p><p class=MsoPlainText><span lang=EN-US>service01:&gt;configure<o:p></o:p></span></p><p class=MsoPlainText><span lang=EN-US>option =<o:p></o:p></span></p><p class=MsoPlainText><span lang=EN-US>Please type : &lt;configure var&gt; tocompile var,<o:p></o:p></span></p><p class=MsoPlainText><span lang=EN-US><span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp; </span>or type : &lt;configure be&gt; to compile be.<o:p></o:p></span></p><p class=MsoPlainText><span lang=EN-US><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></span></p><p style='text-align:justify'><span lang=EN-US style='font-family:Arial'>Thetwo choices refer to creating compiler options for WRF-Var, or alternatively tobegin setting up the calculation of background error statistics. Here, we wishto compile WRF-Var, and so type<o:p></o:p></span></p><p style='text-align:justify'><span lang=EN-US style='font-family:Arial'><b>configurevar<o:p></o:p></b></span></p><p style='text-align:justify'><span lang=EN-US style='font-family:Arial'>Youwill then see a list of alternative compilation options, depending on whetheryou want to run single processor, with different compilers etc, e.g.<o:p></o:p></span></p><p class=MsoPlainText><span lang=EN-US>option = var<o:p></o:p></span></p><p class=MsoPlainText><span lang=EN-US>configure var<o:p></o:p></span></p><p class=MsoPlainText><span lang=EN-US>checking for perl5... no<o:p></o:p></span></p><p class=MsoPlainText><span lang=EN-US>checking for perl... found/usr/local/bin/perl (perl)<o:p></o:p></span></p><p class=MsoPlainText><span lang=EN-US>Will use NETCDF in dir:/usr/local/netcdf<o:p></o:p></span></p><p class=MsoPlainText><span lang=EN-US>PHDF5 not set in environment. Willconfigure WRF for use without.<o:p></o:p></span></p><p class=MsoPlainText><span lang=EN-US>option = var<o:p></o:p></span></p><p class=MsoPlainText><span lang=EN-US>configure for var<o:p></o:p></span></p><p class=MsoPlainText><span lang=EN-US><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></span></p><p class=MsoPlainText><span lang=EN-US>------------------------------------------------------------------<o:p></o:p></span></p><p style='text-align:justify'><span lang=EN-US style='font-size:10.0pt;font-family:"Courier New"'>Please select from among the following supportedplatforms.<o:p></o:p></span></p><p style='text-align:justify'><span lang=EN-US style='font-size:10.0pt;font-family:"Courier New"'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></span></p><p style='text-align:justify'><span lang=EN-US style='font-size:10.0pt;font-family:"Courier New"'>1. Compaq OSF1 alpha<span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>(single-threaded)<o:p></o:p></span></p><p style='text-align:justify'><span lang=EN-US style='font-size:10.0pt;font-family:"Courier New"'>2. Compaq OSF1 alpha DM<span style="mso-spacerun:yes">&nbsp;&nbsp; </span>(RSL, MPICH, RSL, IO)<o:p></o:p></span></p><p style='text-align:justify'><span lang=EN-US style='font-size:10.0pt;font-family:"Courier New"'>3. Compaq OSF1 alpha<span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>(single-threaded, for compare withMM5 3DVAR)<o:p></o:p></span></p><p style='text-align:justify'><span lang=EN-US style='font-size:10.0pt;font-family:"Courier New"'>Enter selection [1-3] :<o:p></o:p></span></p><p style='text-align:justify'><span lang=EN-US style='font-family:Arial'>In theonline tutorial, you will be running WRF-Var in single processor mode.Therefore enter <b>1</b></span><span lang=EN-US style='font-family:Arial'>(single-threaded) at the prompt. This will automatically create a file <i>configure.defaults_wrfvar</i></span><spanlang=EN-US style='font-family:Arial'> in the wrfvar/arch subdirectory. Thissets up compile options etc ready for compilation. We recommend you run WRF-Varin single processor mode first, but you later want to run WRF-Var ondistributed memory machines to really speed things up.<o:p></o:p></span></p><p style='text-align:justify'><span lang=EN-US style='font-family:Arial'>Checkthe WRF-Var configure file has been produced by typing<o:p></o:p></span></p><p style='text-align:justify'><span lang=EN-US style='font-family:Arial'><b>ls-l arch/configure.defaults_wrfvar<o:p></o:p></b></span></p><p style='text-align:justify'><span lang=EN-US style='font-family:Arial'>Browsethe file if interested, then to compile WRF-Var type<o:p></o:p></span></p><p style='text-align:justify'><span lang=EN-US style='font-family:Arial'><b>compilevar<o:p></o:p></b></span></p><p style='text-align:justify'><span lang=EN-US style='font-family:Arial'>Oncethis is complete, you can check for the presence of the WRF-Var executable byissuing the command (from the wrfvar directory)<o:p></o:p></span></p><p style='text-align:justify'><span lang=EN-US style='font-family:Arial'><b>ls-l main/wrfvar.exe<o:p></o:p></b></span></p><p class=MsoPlainText style='text-align:justify'><span lang=EN-US>-rwxr-xr-x&nbsp;&nbsp;1 dmbarker users&nbsp;&nbsp;11045892 May 29&nbsp; 2003 main/wrfvar.exe</span></p><p style='text-align:justify'><span lang=EN-US style='font-family:Arial'>Whileyou are waiting for compilation to finish, we suggest you read the followingsections to acquaint yourself with how you are going to run WRF-Var.<b><u><o:p></o:p></u></b></span></p><p style='text-align:justify'><span lang=EN-US style='font-family:Arial'><b><u>iii.The DA_Run_WRF-Var.csh script.</u></b></span><span lang=EN-US><u> <o:p></o:p></u></span></p><p style='text-align:justify'><span lang=EN-US style='font-family:Arial'>TheWRF-Var system is run (don’t do this yet in the online tutorial!) from thestandard script <i>wrfvar/run/DA_Run_WRF-Var.csh</i></span><span lang=EN-USstyle='font-family:Arial'>. An example ca be seen at<o:p></o:p></span></p><p style='text-align:justify'><span lang=EN-US style='font-family:Arial'><spanstyle="mso-spacerun: yes">&nbsp;</span><ahref="http://www.mmm.ucar.edu/wrf/WG4/wrfvar/DA_Run_WRF-Var.csh.txt">http://www.mmm.ucar.edu/wrf/WG4/wrfvar/DA_Run_WRF-Var.csh.txt</a><o:p></o:p></span></p><p style='text-align:justify'><span lang=EN-US style='font-family:Arial'>Thescript performs a number of tasks, as follows:<o:p></o:p></span></p><p style='margin-left:.5in;text-align:justify;text-indent:-.25in;mso-list:l0 level1 lfo1;tab-stops:list .5in'><![if !supportLists]><span lang=EN-US style='font-family:Arial'>a)<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp; </span></span><![endif]><spanlang=EN-US style='font-family:Arial'>Specify job details via environmentvariables: The user should be able, in most cases, to run WRF-Var just byresetting default environment variables (set below) to values for yourparticular application. Examples include changing data directory, filenames,and particular parameters within WRF (namelist.3dvar) and WRF (namelist.input)files.<o:p></o:p></span></p><p style='margin-left:.5in;text-align:justify;text-indent:-.25in;mso-list:l0 level1 lfo1;tab-stops:list .5in'><![if !supportLists]><span lang=EN-US style='font-family:Arial'>b)<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp; </span></span><![endif]><spanlang=EN-US style='font-family:Arial'>Define default environment variables.These can be overridden in a) by setting non-default values.<o:p></o:p></span></p><p style='margin-left:.5in;text-align:justify;text-indent:-.25in;mso-list:l0 level1 lfo1;tab-stops:list .5in'><![if !supportLists]><span lang=EN-US style='font-family:Arial'>c)<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp; </span></span><![endif]><spanlang=EN-US style='font-family:Arial'>Perform sanity checks (e.g. ensure inputfiles exist). d) Create 3D-Var namelist file <i>namelist.3dvar</i></span><spanlang=EN-US style='font-family:Arial'><o:p></o:p></span></p><p style='margin-left:.5in;text-align:justify;text-indent:-.25in;mso-list:l0 level1 lfo1;tab-stops:list .5in'><![if !supportLists]><span lang=EN-US style='font-family:Arial'>d)<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp; </span></span><![endif]><spanlang=EN-US style='font-family:Arial'>Prepare for assimilation: link, and copydata/executables to the run<span style="mso-spacerun: yes">&nbsp;</span>directory.<o:p></o:p></span></p><p style='margin-left:.5in;text-align:justify;text-indent:-.25in;mso-list:l0 level1 lfo1;tab-stops:list .5in'><![if !supportLists]><span lang=EN-US style='font-family:Arial'>e)<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp; </span></span><![endif]><spanlang=EN-US style='font-family:Arial'>Create <i>namelist.3dvar</i></span><spanlang=EN-US style='font-family:Arial'> and <i>namelist.input</i></span><spanlang=EN-US style='font-family:Arial'> files from environments specified above.<o:p></o:p></span></p><p style='margin-left:.5in;text-align:justify;text-indent:-.25in;mso-list:l0 level1 lfo1;tab-stops:list .5in'><![if !supportLists]><span lang=EN-US style='font-family:Arial'>f)<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></span><![endif]><span lang=EN-US style='font-family:Arial'>Run WRF-Var.<o:p></o:p></span></p><p style='text-align:justify'><span lang=EN-US style='font-family:Arial'>Abrief description of the 3D-Var namelist options is now given.<o:p></o:p></span></p><p style='text-align:justify'><span lang=EN-US style='font-family:Arial'><b><u>iv.The&nbsp; WRF-Var namelist.3dvar file</u></b></span><span lang=EN-US><u><o:p></o:p></u></span></p><p style='text-align:justify'><span lang=EN-US style='font-family:Arial'>Thereare many options you can change in a data assimilation system:&nbsp;withholding particular observations, empirically retuning background errors,changing the minimization convergence criteria, etc, etc. To see the currentfull list of namelist options, check out the section of DA_Run_WRF-Var.csh thatsets the default values. Not all values are provided with comments. This isdeliberate – we only support changing the values with comments! Feel free toexperiment with the others only if you can support yourself by checking thecode to see what these other options do! <o:p></o:p></span></p><p style='text-align:justify'><span lang=EN-US style='font-family:Arial'>The namelist.3dvarfile created for the tutorial case can be seen at<o:p></o:p></span></p><p style='text-align:justify'><span lang=EN-US style='font-family:Arial'><ahref="http://www.mmm.ucar.edu/wrf/WG4/wrfvar/namelist.3dvar.txt">http://www.mmm.ucar.edu/wrf/WG4/wrfvar/namelist.3dvar.txt</a><o:p></o:p></span></p><p style='text-align:justify'><span lang=EN-US style='font-family:Arial'><b><u>v.The&nbsp; WRF namelist.input</u></b></span><span lang=EN-US><u><o:p></o:p></u></span></p><p style='text-align:justify'><span lang=EN-US style='font-family:Arial'>SinceWRF-Var is now a core for the WRF model, it uses the WRF framework to defineand perform parallel, I/O functions. This is fairly transparent in the WRF-Varcode. However, one disadvantage is that WRF-Var now requires one to specify thegrid dimensions at run-time via a file (the previous serial version of MM53DVAR would pick these dimensions up from the input file and dynamicallyallocate memory). <o:p></o:p></span></p><p style='text-align:justify'><span lang=EN-US style='font-family:Arial'>Forthis tutorial, a 45x45x28 200km resolution case-study is used. These griddimensions are specified via the default environment variables in theDA_Run_WRF-Var.csh script. You will need to change these values for your owndomains.<o:p></o:p></span></p><p style='text-align:justify'><span lang=EN-US style='font-family:Arial'>Thenamelist.input file created for the tutorial case can be seen at<o:p></o:p></span></p><p style='text-align:justify'><span lang=EN-US style='font-family:Arial'><ahref="http://www.mmm.ucar.edu/wrf/WG4/wrfvar/namelist.input.txt">http://www.mmm.ucar.edu/wrf/WG4/wrfvar/namelist.input.txt</a><o:p></o:p></span></p><p style='text-align:justify'><span lang=EN-US style='font-family:Arial'><b><u>vi.What next?</u></b></span><span lang=EN-US><u><o:p></o:p></u></span></p><p style='text-align:justify'><span lang=EN-US style='font-family:Arial'>Havingcompiled WRF-Var and familiarized yourself with the script and namelist files,it’s time to run WRF-Var!<o:p></o:p></span></p><p style='text-align:justify'><span lang=EN-US style='font-family:Arial'><u><ahref="wrfvar-casestudy.htm"><span style='color:blue'>d) Run WRF-Var CONUS CaseStudy</span></a></u><o:p></o:p></span></p><div class=MsoNormal align=center style='text-align:center'><span lang=EN-US><hr size=2 width="100%" align=center></span></div><p><span lang=EN-US style='font-family:Arial'><b>Trouble Shooting:</b></span><spanlang=EN-US> </span></p><p><span lang=EN-US style='font-family:Arial'><b>1.</b></span><span lang=EN-USstyle='font-family:Arial'> If you have questions, ask </span><span lang=EN-USstyle='font-family:Arial;color:#000099'><a href="mailto:wrfhelp@wrf-model.org"><spanstyle='font-family:"Times New Roman"'>wrfhelp@ucar.edu</span></a></span><spanlang=EN-US> </span></p><div class=MsoNormal align=center style='text-align:center'><span lang=EN-US><hr size=2 width="100%" align=center></span></div><p class=MsoNormal align=center style='text-align:center'><span lang=EN-US><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></span></p><p class=MsoNormal align=center style='text-align:center'><span lang=EN-USstyle='font-family:Arial'><a href="wrfvar-tutorial.htm">Return to WRF-VarTutorial Page</a><o:p></o:p></span></p><p class=MsoNormal><span lang=EN-US style='color:windowtext'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></span></p></div></body></html>