<!doctype html public "-//w3c//dtd html 4.0 transitional//en">
<html xmlns:v="urn:schemas-microsoft-com:vml"
xmlns:o="urn:schemas-microsoft-com:office:office"
xmlns:w="urn:schemas-microsoft-com:office:word"
xmlns="http://www.w3.org/TR/REC-html40">

<head>
<meta http-equiv=Content-Type content="text/html; charset=iso-8859-1">
<meta name=ProgId content=Word.Document>
<meta name=Generator content="Microsoft Word 9">
<meta name=Originator content="Microsoft Word 9">
<link rel=File-List href="./wrf3dvar_setup_files/filelist.xml">
<link rel=Edit-Time-Data href="./wrf3dvar_setup_files/editdata.mso">
<!--[if !mso]>
<style>
v\:* {behavior:url(#default#VML);}
o\:* {behavior:url(#default#VML);}
w\:* {behavior:url(#default#VML);}
.shape {behavior:url(#default#VML);}
</style>
<![endif]-->
<title>3DVAR Tutorial</title>
<!--[if gte mso 9]><xml>
 <o:DocumentProperties>
  <o:Author>dmbarker</o:Author>
  <o:LastAuthor>dmbarker</o:LastAuthor>
  <o:Revision>29</o:Revision>
  <o:TotalTime>202</o:TotalTime>
  <o:Created>2003-06-03T17:13:00Z</o:Created>
  <o:LastSaved>2003-07-03T21:17:00Z</o:LastSaved>
  <o:Pages>5</o:Pages>
  <o:Words>1104</o:Words>
  <o:Characters>6297</o:Characters>
  <o:Company>NCAR/UCAR</o:Company>
  <o:Lines>52</o:Lines>
  <o:Paragraphs>12</o:Paragraphs>
  <o:CharactersWithSpaces>7733</o:CharactersWithSpaces>
  <o:Version>9.2720</o:Version>
 </o:DocumentProperties>
</xml><![endif]--><!--[if gte mso 9]><xml>
 <w:WordDocument>
  <w:View>Print</w:View>
 </w:WordDocument>
</xml><![endif]-->
<style>
<!--
 /* Font Definitions */
@font-face
	{font-family:"MS Mincho";
	panose-1:2 2 6 9 4 2 5 8 3 4;
	mso-font-alt:"\FF2D\FF33 \660E\671D";
	mso-font-charset:128;
	mso-generic-font-family:modern;
	mso-font-pitch:fixed;
	mso-font-signature:-1610612033 1757936891 16 0 131231 0;}
@font-face
	{font-family:"\@MS Mincho";
	panose-1:2 2 6 9 4 2 5 8 3 4;
	mso-font-charset:128;
	mso-generic-font-family:modern;
	mso-font-pitch:fixed;
	mso-font-signature:-1610612033 1757936891 16 0 131231 0;}
 /* Style Definitions */
p.MsoNormal, li.MsoNormal, div.MsoNormal
	{mso-style-parent:"";
	margin:0in;
	margin-bottom:.0001pt;
	mso-pagination:widow-orphan;
	font-size:12.0pt;
	font-family:"Times New Roman";
	mso-fareast-font-family:"Times New Roman";
	color:black;}
h2
	{margin-right:0in;
	mso-margin-top-alt:auto;
	mso-margin-bottom-alt:auto;
	margin-left:0in;
	mso-pagination:widow-orphan;
	mso-outline-level:2;
	font-size:18.0pt;
	font-family:"Times New Roman";
	color:black;
	font-weight:bold;}
a:link, span.MsoHyperlink
	{color:#0000EE;
	text-decoration:underline;
	text-underline:single;}
a:visited, span.MsoHyperlinkFollowed
	{color:#551A8B;
	text-decoration:underline;
	text-underline:single;}
p.MsoPlainText, li.MsoPlainText, div.MsoPlainText
	{margin:0in;
	margin-bottom:.0001pt;
	mso-pagination:widow-orphan;
	font-size:10.0pt;
	font-family:"Courier New";
	mso-fareast-font-family:"Times New Roman";
	color:windowtext;}
p
	{margin-right:0in;
	mso-margin-top-alt:auto;
	mso-margin-bottom-alt:auto;
	margin-left:0in;
	mso-pagination:widow-orphan;
	font-size:12.0pt;
	font-family:"Times New Roman";
	mso-fareast-font-family:"Times New Roman";
	color:black;}
tt
	{mso-ascii-font-family:"Courier New";
	mso-fareast-font-family:"Courier New";
	mso-hansi-font-family:"Courier New";
	mso-bidi-font-family:"Courier New";}
@page Section1
	{size:8.5in 11.0in;
	margin:1.0in 1.25in 1.0in 1.25in;
	mso-header-margin:.5in;
	mso-footer-margin:.5in;
	mso-paper-source:0;}
div.Section1
	{page:Section1;}
-->
</style>

<script language="JavaScript">
<!-- Begin
function popUps(URL,sw,sh) {
day = new Date();
id = day.getTime();
eval("page" + id + " = window.open(URL, '" + id + "', 'toolbar=0,scrollbars=1,location=0,statusbar=0,menubar=0,resizable=0,width="+sw+",height="+sh+"');");
}
// End -->
</script>
<!--[if gte mso 9]><xml>
 <o:shapedefaults v:ext="edit" spidmax="1027"/>
</xml><![endif]--><!--[if gte mso 9]><xml>
 <o:shapelayout v:ext="edit">
  <o:idmap v:ext="edit" data="1"/>
 </o:shapelayout></xml><![endif]-->
</head>

<body bgcolor=white lang=EN-US link="#0000ee" vlink="#551a8b" style='tab-interval:
.5in' alink="#FF0000">

<div class=Section1>

<p align=center style='text-align:center'><b><span style='font-size:18.0pt;
mso-bidi-font-size:12.0pt;font-family:Arial'>WRF 3DVAR Tutorial<o:p></o:p></span></b></p>

<p align=center style='text-align:center'><b><span style='font-size:18.0pt;
mso-bidi-font-size:12.0pt;font-family:Arial;color:blue'>b. Setting up 3DVAR<o:p></o:p></span></b></p>

<p class=MsoNormal align=center style='text-align:center'><b><span
style='font-family:Arial'>(06/09/2003)</span></b></p>

<p style='text-align:justify'><span style='font-family:Arial'>In this part of
the 3DVAR tutorial you will download and compile 3DVAR. A description of the script
that controls the running of 3DVAR and an overview of the namelist that it
creates will also be given.<o:p></o:p></span></p>

<p style='text-align:justify'><b><u><span style='font-family:Arial'>1.
Accessing 3DVAR code</span></u></b><u> <o:p></o:p></u></p>

<p style='text-align:justify'><span style='font-family:Arial'>First, go to your
working directory (defined by $DAT_DIR) and download the <a
href="http://www.mmm.ucar.edu/wrf/users/src/3dvar.tar.gz">3dvar program tar
file</a>. Once you have it on your machine, type the following to unzip and
untar it:</span> </p>

<p style='text-align:justify'><b><span style='font-family:Arial'>gunzip
3dvar.tar.gz<o:p></o:p></span></b></p>

<p style='text-align:justify'><b><span style='font-family:Arial'>tar -xvf
3dvar.tar</span></b> </p>

<p style='text-align:justify'><span style='font-family:Arial'>After this, you
should see a program directory 3dvar/ created in your working directory. If so,
tidy up with the command<o:p></o:p></span></p>

<p style='text-align:justify'><b><span style='font-family:Arial'>rm 3dvar.tar<o:p></o:p></span></b></p>

<p style='text-align:justify'><span style='font-family:Arial'>cd to the 3dvar
directory:</span> </p>

<p style='text-align:justify'><b><span style='font-family:Arial'>cd 3dvar</span></b>
</p>

<p style='text-align:justify'><span style='font-family:Arial'>and you should
see something like the following files and subdirectories listed:</span> </p>

<p style='text-align:justify'><b><span style='font-family:Arial'>ls &#8211;l <o:p></o:p></span></b></p>

<p class=MsoPlainText style='text-align:justify'><span style='mso-fareast-font-family:
"MS Mincho"'>total 123<o:p></o:p></span></p>

<p class=MsoPlainText style='text-align:justify'><span style='mso-fareast-font-family:
"MS Mincho"'>drwxr-xr-x<span style="mso-spacerun: yes">&nbsp;&nbsp; </span>2
dmbarker users<span style="mso-spacerun:
yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>8192 May 28 12:57 CVS/<o:p></o:p></span></p>

<p class=MsoPlainText style='text-align:justify'><span style='mso-fareast-font-family:
"MS Mincho"'>-rw-r--r--<span style="mso-spacerun: yes">&nbsp;&nbsp; </span>1
dmbarker users<span style="mso-spacerun:
yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>2178 May 21 14:14 Makefile<o:p></o:p></span></p>

<p class=MsoPlainText style='text-align:justify'><span style='mso-fareast-font-family:
"MS Mincho"'>-rw-r--r--<span style="mso-spacerun: yes">&nbsp;&nbsp; </span>1
dmbarker users<span style="mso-spacerun: yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>21823 Dec<span style="mso-spacerun: yes">&nbsp; </span>2 14:21 README<o:p></o:p></span></p>

<p class=MsoPlainText style='text-align:justify'><span style='mso-fareast-font-family:
"MS Mincho"'>drwxr-xr-x<span style="mso-spacerun: yes">&nbsp;&nbsp; </span>3
dmbarker users<span style="mso-spacerun:
yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>8192 May 28 12:56 Registry/<o:p></o:p></span></p>

<p class=MsoPlainText style='text-align:justify'><span style='mso-fareast-font-family:
"MS Mincho"'>drwxr-xr-x<span style="mso-spacerun: yes">&nbsp;&nbsp; </span>3
dmbarker users<span style="mso-spacerun:
yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>8192 May 28 12:56 arch/<o:p></o:p></span></p>

<p class=MsoPlainText style='text-align:justify'><span style='mso-fareast-font-family:
"MS Mincho"'>-rwxr-xr-x<span style="mso-spacerun: yes">&nbsp;&nbsp; </span>1
dmbarker users<span style="mso-spacerun:
yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>888 May 21 14:14 clean*<o:p></o:p></span></p>

<p class=MsoPlainText style='text-align:justify'><span style='mso-fareast-font-family:
"MS Mincho"'>-rwxr-xr-x<span style="mso-spacerun: yes">&nbsp;&nbsp; </span>1
dmbarker users<span style="mso-spacerun:
yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>1201 Mar 11 12:00 compile*<o:p></o:p></span></p>

<p class=MsoPlainText style='text-align:justify'><span style='mso-fareast-font-family:
"MS Mincho"'>-rwxr-xr-x<span style="mso-spacerun: yes">&nbsp;&nbsp; </span>1
dmbarker users<span style="mso-spacerun:
yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>6896 Jan 14 09:00 configure*<o:p></o:p></span></p>

<p class=MsoPlainText style='text-align:justify'><span style='mso-fareast-font-family:
"MS Mincho"'>drwxr-xr-x<span style="mso-spacerun: yes">&nbsp;&nbsp; </span>7
dmbarker users<span style="mso-spacerun:
yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>8192 May 28 12:57 da_3dvar/<o:p></o:p></span></p>

<p class=MsoPlainText style='text-align:justify'><span style='mso-fareast-font-family:
"MS Mincho"'>drwxr-xr-x<span style="mso-spacerun: yes">&nbsp;&nbsp; </span>8
dmbarker users<span style="mso-spacerun:
yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>8192 May 28 12:57 external/<o:p></o:p></span></p>

<p class=MsoPlainText style='text-align:justify'><span style='mso-fareast-font-family:
"MS Mincho"'>drwxr-xr-x<span style="mso-spacerun: yes">&nbsp;&nbsp; </span>3
dmbarker users<span style="mso-spacerun:
yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>8192 May 28 12:57 frame/<o:p></o:p></span></p>

<p class=MsoPlainText style='text-align:justify'><span style='mso-fareast-font-family:
"MS Mincho"'>drwxr-xr-x<span style="mso-spacerun: yes">&nbsp;&nbsp; </span>3
dmbarker users<span style="mso-spacerun:
yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>8192 May 28 12:57 inc/<o:p></o:p></span></p>

<p class=MsoPlainText style='text-align:justify'><span style='mso-fareast-font-family:
"MS Mincho"'>-rw-r--r--<span style="mso-spacerun: yes">&nbsp;&nbsp; </span>1
dmbarker users<span style="mso-spacerun:
yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>0 May 29
10:40 list<o:p></o:p></span></p>

<p class=MsoPlainText style='text-align:justify'><span style='mso-fareast-font-family:
"MS Mincho"'>drwxr-xr-x<span style="mso-spacerun: yes">&nbsp;&nbsp; </span>3 dmbarker
users<span style="mso-spacerun: yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>8192 May 28 12:57 main/<o:p></o:p></span></p>

<p class=MsoPlainText style='text-align:justify'><span style='mso-fareast-font-family:
"MS Mincho"'>drwxr-xr-x<span style="mso-spacerun: yes">&nbsp;&nbsp; </span>3
dmbarker users<span style="mso-spacerun:
yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>8192 May 28 12:57 run/<o:p></o:p></span></p>

<p class=MsoPlainText style='text-align:justify'><span style='mso-fareast-font-family:
"MS Mincho"'>drwxr-xr-x<span style="mso-spacerun: yes">&nbsp;&nbsp; </span>3
dmbarker users<span style="mso-spacerun:
yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>8192 May 28 12:57 share/<o:p></o:p></span></p>

<p class=MsoPlainText style='text-align:justify'><span style='mso-fareast-font-family:
"MS Mincho"'>drwxr-xr-x<span style="mso-spacerun: yes">&nbsp;&nbsp; </span>3
dmbarker users<span style="mso-spacerun:
yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>8192 May 28 12:57 tools/</span>
</p>

<p style='text-align:justify'><b><u><span style='font-family:Arial'>2.
Compiling 3DVAR</span></u></b><u><o:p></o:p></u></p>

<p style='text-align:justify'><span style='font-family:Arial'>To compile 3DVAR,
you first type<o:p></o:p></span></p>

<p style='text-align:justify'><b><span style='font-family:Arial'>configure<o:p></o:p></span></b></p>

<p style='text-align:justify'><span style='font-family:Arial'>You will then be
queried with something like the following:<o:p></o:p></span></p>

<p class=MsoPlainText><span style='mso-fareast-font-family:"MS Mincho"'>service10:/mmmtmp/dmbarker/learn3dvar/3dvar&gt;configure<o:p></o:p></span></p>

<p class=MsoPlainText><span style='mso-fareast-font-family:"MS Mincho"'>checking
for perl5... no<o:p></o:p></span></p>

<p class=MsoPlainText><span style='mso-fareast-font-family:"MS Mincho"'>checking
for perl... found /usr/bin/perl (perl)<o:p></o:p></span></p>

<p class=MsoPlainText><span style='mso-fareast-font-family:"MS Mincho"'>Will
use NETCDF in dir: /usr/local/netcdf<o:p></o:p></span></p>

<p class=MsoPlainText><span style='mso-fareast-font-family:"MS Mincho"'>------------------------------------------------------------------------<o:p></o:p></span></p>

<p class=MsoPlainText><span style='mso-fareast-font-family:"MS Mincho"'>Please
select from among the following supported platforms.<o:p></o:p></span></p>

<p class=MsoPlainText><span style='mso-fareast-font-family:"MS Mincho"'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></span></p>

<p class=MsoPlainText><span style='mso-fareast-font-family:"MS Mincho"'><span
style="mso-spacerun: yes">&nbsp;&nbsp; </span>1.<span style="mso-spacerun:
yes">&nbsp; </span>Compaq OSF1 alpha<span style="mso-spacerun:
yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>(single-threaded)<o:p></o:p></span></p>

<p class=MsoPlainText><span style='mso-fareast-font-family:"MS Mincho"'><span
style="mso-spacerun: yes">&nbsp;&nbsp; </span>2.<span style="mso-spacerun:
yes">&nbsp; </span>Compaq OSF1 alpha DM<span style="mso-spacerun:
yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>(RSL, MPICH, RSL IO)<o:p></o:p></span></p>

<p class=MsoPlainText><span style='mso-fareast-font-family:"MS Mincho"'><span
style="mso-spacerun: yes">&nbsp;&nbsp; </span>3.<span style="mso-spacerun:
yes">&nbsp; </span>Compaq OSF1 alpha<span style="mso-spacerun:
yes">&nbsp;&nbsp;&nbsp; </span>(single-threaded, no NetCDF)<o:p></o:p></span></p>

<p class=MsoPlainText><span style='mso-fareast-font-family:"MS Mincho"'><span
style="mso-spacerun: yes">&nbsp;&nbsp; </span>4.<span style="mso-spacerun:
yes">&nbsp; </span>Compaq OSF1 alpha DM<span style="mso-spacerun: yes">&nbsp;
</span>(RSL, MPICH, RSL IO, no NetCDF)<o:p></o:p></span></p>

<p class=MsoPlainText><span style='mso-fareast-font-family:"MS Mincho"'><span
style="mso-spacerun: yes">&nbsp;&nbsp; </span>5.<span style="mso-spacerun:
yes">&nbsp; </span>Compaq OSF1 alpha DM<span style="mso-spacerun:
yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>(RSL, DECMPI, RSL IO)<o:p></o:p></span></p>

<p class=MsoPlainText><span style='mso-fareast-font-family:"MS Mincho"'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></span></p>

<p class=MsoPlainText><span style='mso-fareast-font-family:"MS Mincho"'>Enter
selection [1-5] : <o:p></o:p></span></p>

<p style='text-align:justify'><span style='font-family:Arial'>In this tutorial,
you will be running 3DVAR in single processor mode. Therefore enter &#8220;<b>1</b>&#8221;
(single-threaded) at the prompt. This will automatically create a file
&#8220;configure.3dvar&#8221; in your 3dvar directory which sets up compile options etc
ready for compilation. We recommend you run 3DVAR in single processor mode
first, but you later want to run 3DVAR on distributed memory machines to really
speed things up.<o:p></o:p></span></p>

<p style='text-align:justify'><span style='font-family:Arial'>Check the
configure.3dvar file has been produced by typing<o:p></o:p></span></p>

<p style='text-align:justify'><b><span style='font-family:Arial'>ls &#8211;l
configure.3dvar<o:p></o:p></span></b></p>

<p style='text-align:justify'><span style='font-family:Arial'>Browse the file
if interested, then to compile 3DVAR type<o:p></o:p></span></p>

<p style='text-align:justify'><b><span style='font-family:Arial'>compile 3dvar<o:p></o:p></span></b></p>

<p style='text-align:justify'><span style='font-family:Arial'>Once this is
complete, you can check for the presence of the 3dvar executable by issuing the
command (from the 3dvar directory)<o:p></o:p></span></p>

<p style='text-align:justify'><b><span style='font-family:Arial'>ls &#8211;l
main/da_3dvar.exe<o:p></o:p></span></b></p>

<p class=MsoPlainText style='text-align:justify'><span style='mso-fareast-font-family:
"MS Mincho"'>-rwxr-xr-x<span style="mso-spacerun: yes">&nbsp;&nbsp; </span>1
dmbarker users<span style="mso-spacerun: yes">&nbsp;&nbsp;&nbsp;
</span>13924320 May 29<span style="mso-spacerun: yes">&nbsp; </span>2003
main/da_3dvar.exe*<o:p></o:p></span></p>

<p style='text-align:justify'><span style='font-family:Arial'>While you&#8217;re
waiting for compilation to finish, we suggest you read the following sections
to acquaint yourself with how you&#8217;re going to run 3DVAR.<b><u><o:p></o:p></u></b></span></p>

<p style='text-align:justify'><b><u><span style='font-family:Arial'>3. The
DA_Run_3DVAR.csh script.</span></u></b><u> <o:p></o:p></u></p>

<p style='text-align:justify'><span style='font-family:Arial'>The 3DVAR system
is run (don&#8217;t do this yet!) from the <a
href="http://www.mmm.ucar.edu/wrf/WG4/tutorial/DA_Run_3DVAR.csh.txt">DA_Run_3DVAR.csh
script</a>, found in the 3dvar/run directory. The script performs a number of
tasks, as follows:<o:p></o:p></span></p>

<p style='text-align:justify'><span style='font-family:Arial'>a) Specify job
details: At minimum, you need to define the directories <i>DAT_DIR</i> (where
input data is stored), <i>RUN_DIR</i> (where you will run and output data) and <i>WRF_DIR</i>
(location of 3DVAR code).<o:p></o:p></span></p>

<p style='text-align:justify'><span style='font-family:Arial'>You may also want
to set your own RUN_ID if you want to save output from different 3DVAR runs
(any previous experiment defined with the same RUN_ID is deleted by default
when you run the script).<o:p></o:p></span></p>

<p style='text-align:justify'><span style='font-family:Arial'>b) Set up
files/directories and perform checks on the 3DVAR set up.<o:p></o:p></span></p>

<p style='text-align:justify'><span style='font-family:Arial'>c) Set default
3DVAR namelist options. In the <i>DA_Run_3DVAR.csh</i> script this is done via
environment variables. Values may be overwritten by i) predefining the
environment variables on the command line, ii) within the script or iii) in
future via a GHUI.<o:p></o:p></span></p>

<p style='text-align:justify'><span style='font-family:Arial'>d) Create 3DVAR
namelist file <i>namelist.3dvar</i>.<o:p></o:p></span></p>

<p style='text-align:justify'><span style='font-family:Arial'>e) Run 3DVAR &#8211;
the exact method will depend on your machine. A few examples are included. Uncomment
the command appropriate for your machine.<o:p></o:p></span></p>

<p style='text-align:justify'><span style='font-family:Arial'>A brief
description of 3DVAR&#8217;s namelist options is now given.<o:p></o:p></span></p>

<p style='text-align:justify'><b><u><span style='font-family:Arial'>4. The<span
style="mso-spacerun: yes">&nbsp; </span>3DVAR namelist &#8220;namelist.3dvar&#8221;</span></u></b><u><o:p></o:p></u></p>

<p style='text-align:justify'><span style='font-family:Arial'>There are many
options you can change in a data assimilation system:<span style="mso-spacerun:
yes">&nbsp; </span>withholding particular observations, empirically retuning
background errors, changing the minimization convergence criteria, etc, etc. To
see the current full list of namelist options, check out the section of <a
href="http://www.mmm.ucar.edu/wrf/WG4/tutorial/DA_Run_3DVAR.csh.txt">DA_Run_3DVAR.csh
script</a> that sets the default values. Not all values are provided with
comments. This is deliberate &#8211; we only support changing the values with
comments! Feel free to experiment with the others only if you can support
yourself by checking the code to see what these other options do! <o:p></o:p></span></p>

<p style='text-align:justify'><b><u><span style='font-family:Arial'>5. The<span
style="mso-spacerun: yes">&nbsp; </span>WRF namelist &#8220;namelist.input&#8221;</span></u></b><u><o:p></o:p></u></p>

<p style='text-align:justify'><span style='font-family:Arial'>Since 3DVAR is
now a core for the WRF model, it uses the WRF framework to define and perform
parallel, I/O functions. This is fairly transparent in the 3DVAR code. However,
one disadvantage is that 3DVAR now requires one to specify the grid dimensions
at run-time via a file <a
href="http://www.mmm.ucar.edu/wrf/WG4/tutorial/namelist.input.txt">namelist.input</a><i>
</i>(the previous serial version of 3DVAR would pick these dimensions up from
the input file and dynamically allocate memory). <o:p></o:p></span></p>

<p style='text-align:justify'><span style='font-family:Arial'>For this
tutorial&#8217;s case study, we have created a file <i>namelist.input.caa1 </i>containing
the grid point dimensions for our standard case. The only values you need
concern yourself with are<o:p></o:p></span></p>

<p style='text-align:justify'><i><span style='font-family:Arial'>e_we = 211 </span></i><span
style='font-family:Arial'>(Number of grid points in N-S direction)<i><o:p></o:p></i></span></p>

<p style='text-align:justify'><i><span style='font-family:Arial'>e_ns = 343 </span></i><span
style='font-family:Arial'>(Number of grid points in E-W direction)<i>,<o:p></o:p></i></span></p>

<p style='text-align:justify'><i><span style='font-family:Arial'>e_vert = 42 </span></i><span
style='font-family:Arial'>(Number of vertical levels)<o:p></o:p></span></p>

<p style='text-align:justify'><span style='font-family:Arial'>dx = 15000
(resolution in m)<i><o:p></o:p></i></span></p>

<p style='text-align:justify'><span style='font-family:Arial'>dy = 15000
(resolution in m)<i><o:p></o:p></i></span></p>

<p style='text-align:justify'><span style='font-family:Arial'>You also need to
insert the appropriate date: 00Z 3<sup>rd</sup> <span style='text-transform:
uppercase'>August 2002.<o:p></o:p></span></span></p>

<p style='text-align:justify'><span style='font-family:Arial'>You will need to
change these values for your own cases.<o:p></o:p></span></p>

<p style='text-align:justify'><b><span style='font-family:Arial'>NOTE 1: </span></b><span
style='font-family:Arial'>The 3DVAR analysis is performed on the &#8220;mass&#8221; points
of the WRF grid. The number of 3DVAR N-S and E-W points is <b>one less</b> than
the input WRF first guess (e.g. 3DVAR dimension for the standard case is 211x343x42
whereas it is 212x344x42 for the MM5 first guess!<o:p></o:p></span></p>

<p style='text-align:justify'><b><span style='font-family:Arial'>NOTE 2: </span></b><span
style='font-family:Arial'>So you think you spotted a mistake &#8211; shouldn&#8217;t <i>e_ns</i>
be the number of grid points in the N-S, not E-W direction? Full marks for
observation, but wrong! As the basic version of 3DVAR is still on the MM5 grid
(i=y), not WRF (i=x), we fool the WRF framework into running on the 3DVAR grid
with this simple kludge. The next release will be i=x so this kludge will be
removed.<o:p></o:p></span></p>

<p style='text-align:justify'><b><u><span style='font-family:Arial'>5. What
next?</span></u></b><u><o:p></o:p></u></p>

<p style='text-align:justify'><span style='font-family:Arial'>Having compiled
3DVAR and familiarized yourself with the script and namelist files, it&#8217;s time
to run 3DVAR!<o:p></o:p></span></p>

<p style='text-align:justify'><u><span style='font-family:Arial'><a
href="http://www.mmm.ucar.edu/wrf/WG4/tutorial/wrf3dvar_case_study.htm"><span
style='color:blue'>c) 3DVAR &#8211; Run Case Study</span></a></span></u><span
style='font-family:Arial'><o:p></o:p></span></p>


<div class=MsoNormal align=center style='text-align:center'>

<hr size=2 width="100%" align=center>

</div>


<p><b><span style='font-family:Arial'>Trouble Shooting:</span></b> </p>

<p><b><span style='font-family:Arial'>1.</span></b><span style='font-family:
Arial'> If you have questions, ask </span><span style='font-family:Arial;
color:#000099'><a href="mailto:wrfhelp@wrf-model.org"><span style='font-family:
"Times New Roman"'>wrfhelp@wrf-model.org</span></a></span> </p>


<div class=MsoNormal align=center style='text-align:center'>

<hr size=2 width="100%" align=center>

</div>


<p class=MsoNormal align=center style='text-align:center'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p>

<p class=MsoNormal align=center style='text-align:center'><span
style='font-family:Arial'><a
href="http://www.mmm.ucar.edu/wrf/WG4/tutorial/wrf3dvar_tutorial.htm">Return to
3DVAR Tutorial Page</a><o:p></o:p></span></p>

<p class=MsoNormal><span style='color:windowtext'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></span></p>

</div>

</body>

</html>
