<!DOCTYPE html PUBLIC "-//w3c//dtd html 4.0 transitional//en">
<html xmlns:v="urn:schemas-microsoft-com:vml"
 xmlns:o="urn:schemas-microsoft-com:office:office"
 xmlns:w="urn:schemas-microsoft-com:office:word"
 xmlns="http://www.w3.org/TR/REC-html40">
<head>
  <meta http-equiv="Content-Type"
 content="text/html; charset=iso-8859-1">
  <meta name="ProgId" content="Word.Document">
  <meta name="Generator" content="Microsoft Word 9">
  <meta name="Originator" content="Microsoft Word 9">
  <link rel="File-List" href="./wrf3dvar_diagnostics_files/filelist.xml">
  <link rel="Edit-Time-Data"
 href="./wrf3dvar_diagnostics_files/editdata.mso">
<!--[if !mso]>
<style>
v\:* {behavior:url(#default#VML);}
o\:* {behavior:url(#default#VML);}
w\:* {behavior:url(#default#VML);}
.shape {behavior:url(#default#VML);}
</style>
<![endif]-->
  <title>3DVAR Tutorial</title>
<!--[if gte mso 9]><xml>
 <o:DocumentProperties>
  <o:Author>dmbarker</o:Author>
  <o:LastAuthor>dmbarker</o:LastAuthor>
  <o:Revision>21</o:Revision>
  <o:TotalTime>392</o:TotalTime>
  <o:Created>2003-06-03T17:53:00Z</o:Created>
  <o:LastSaved>2003-07-03T21:59:00Z</o:LastSaved>
  <o:Pages>3</o:Pages>
  <o:Words>682</o:Words>
  <o:Characters>3893</o:Characters>
  <o:Company>NCAR/UCAR</o:Company>
  <o:Lines>32</o:Lines>
  <o:Paragraphs>7</o:Paragraphs>
  <o:CharactersWithSpaces>4780</o:CharactersWithSpaces>
  <o:Version>9.2720</o:Version>
 </o:DocumentProperties>
</xml><![endif]--><!--[if gte mso 9]><xml>
 <w:WordDocument>
  <w:View>Print</w:View>
 </w:WordDocument>
</xml><![endif]-->
  <style>
<!--
 /* Font Definitions */
@font-face
	{font-family:"MS Mincho";
	panose-1:2 2 6 9 4 2 5 8 3 4;
	mso-font-alt:"\FF2D\FF33 \660E\671D";
	mso-font-charset:128;
	mso-generic-font-family:modern;
	mso-font-pitch:fixed;
	mso-font-signature:-1610612033 1757936891 16 0 131231 0;}
@font-face
	{font-family:"\@MS Mincho";
	panose-1:2 2 6 9 4 2 5 8 3 4;
	mso-font-charset:128;
	mso-generic-font-family:modern;
	mso-font-pitch:fixed;
	mso-font-signature:-1610612033 1757936891 16 0 131231 0;}
 /* Style Definitions */
p.MsoNormal, li.MsoNormal, div.MsoNormal
	{mso-style-parent:"";
	margin:0in;
	margin-bottom:.0001pt;
	mso-pagination:widow-orphan;
	font-size:12.0pt;
	font-family:"Times New Roman";
	mso-fareast-font-family:"Times New Roman";
	color:black;}
h2
	{margin-right:0in;
	mso-margin-top-alt:auto;
	mso-margin-bottom-alt:auto;
	margin-left:0in;
	mso-pagination:widow-orphan;
	mso-outline-level:2;
	font-size:18.0pt;
	font-family:"Times New Roman";
	color:black;
	font-weight:bold;}
a:link, span.MsoHyperlink
	{color:#0000EE;
	text-decoration:underline;
	text-underline:single;}
a:visited, span.MsoHyperlinkFollowed
	{color:#551A8B;
	text-decoration:underline;
	text-underline:single;}
p.MsoPlainText, li.MsoPlainText, div.MsoPlainText
	{margin:0in;
	margin-bottom:.0001pt;
	mso-pagination:widow-orphan;
	font-size:10.0pt;
	font-family:"Courier New";
	mso-fareast-font-family:"Times New Roman";
	color:windowtext;}
p
	{margin-right:0in;
	mso-margin-top-alt:auto;
	mso-margin-bottom-alt:auto;
	margin-left:0in;
	mso-pagination:widow-orphan;
	font-size:12.0pt;
	font-family:"Times New Roman";
	mso-fareast-font-family:"Times New Roman";
	color:black;}
tt
	{mso-ascii-font-family:"Courier New";
	mso-fareast-font-family:"Courier New";
	mso-hansi-font-family:"Courier New";
	mso-bidi-font-family:"Courier New";}
@page Section1
	{size:8.5in 11.0in;
	margin:1.0in 1.25in 1.0in 1.25in;
	mso-header-margin:.5in;
	mso-footer-margin:.5in;
	mso-paper-source:0;}
div.Section1
	{page:Section1;}
 /* List Definitions */
@list l0
	{mso-list-id:1829981821;
	mso-list-type:hybrid;
	mso-list-template-ids:-56229686 540806894 67698691 67698693 67698689 67698691 67698693 67698689 67698691 67698693;}
@list l0:level1
	{mso-level-number-format:bullet;
	mso-level-text:\F0B7;
	mso-level-tab-stop:.5in;
	mso-level-number-position:left;
	text-indent:-.25in;
	font-family:Symbol;
	mso-fareast-font-family:"Times New Roman";
	mso-bidi-font-family:Arial;}
ol
	{margin-bottom:0in;}
ul
	{margin-bottom:0in;}
-->
  </style>
  <script language="JavaScript">
<!-- Begin
function popUps(URL,sw,sh) {
day = new Date();
id = day.getTime();
eval("page" + id + " = window.open(URL, '" + id + "', 'toolbar=0,scrollbars=1,location=0,statusbar=0,menubar=0,resizable=0,width="+sw+",height="+sh+"');");
}
// End -->
  </script><!--[if gte mso 9]><xml>
 <o:shapedefaults v:ext="edit" spidmax="1027"/>
</xml><![endif]--><!--[if gte mso 9]><xml>
 <o:shapelayout v:ext="edit">
  <o:idmap v:ext="edit" data="1"/>
 </o:shapelayout></xml><![endif]-->
</head>
<body bgcolor="white" lang="EN-US" link="#0000ee" vlink="#551a8b"
 style="" alink="#ff0000">
<div class="Section1">
<h2 align="center" style="text-align: center;"><span
 style="font-family: Arial;"><o:p></o:p></span></h2>
<h2 style="text-align: justify;"><span
 style="font-family: Arial; color: blue;">e. 3DVAR &#8211; Diagnostics</span></h2>
<p style="text-align: justify;"><span style="font-family: Arial;">WRF
3D-Var produces a
number of diagnostics file that contain useful information on how the
assimilation has performed. This section will introduce you to some of
these
files, and what to look for.<o:p></o:p></span></p>
<p style="text-align: justify;"><span style="font-family: Arial;">By
this stage of the online tutorial you
have successfully compiled and run WRF 3D-Var. If not, you should
return to the <a
 href="http://www.mmm.ucar.edu/wrf/WG4/tutorial/wrf3dvar_tutorial.htm">3D-Var
Tutorial
Page</a> to try these out.</span><span
 style="font-family: Arial; color: blue;"><o:p></o:p></span></p>
<p style="text-align: justify;"><b><u><span style="font-family: Arial;">1.
Which
are the important diagnostic to look for?</span></u></b><u><o:p></o:p></u></p>
<p style="text-align: justify;"><span style="font-family: Arial;">Having
run WRF 3D-Var,
it is important to check a number of output files to see if the
assimilation
appears sensible. Change directory to where you ran the previous
case-study:<o:p></o:p></span></p>
<p style="text-align: justify;"><b><span style="font-family: Arial;">cd
${RUN_DIR}/${RUN_ID}<o:p></o:p></span></b></p>
<p style="text-align: justify;"><b><span style="font-family: Arial;">ls
&#8211;l </span></b><span style="font-family: Arial;"><o:p></o:p></span></p>
<p style="text-align: justify;"><span style="font-family: Arial;">You
will see
something like the following:<o:p></o:p></span></p>
<p class="MsoPlainText" style="text-align: justify;"><span
 style="font-size: 9pt;">total 16507<o:p></o:p></span></p>
<p class="MsoPlainText" style="text-align: justify;"><span
 style="font-size: 9pt;">-rwxr-xr-x<span style="">&nbsp;&nbsp; </span>1
mmm01<span style="">&nbsp;&nbsp;&nbsp; </span>system<span style="">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>8765 Jun<span style="">&nbsp; </span>4 16:45 LANDUSE.TBL*<o:p></o:p></span></p>
<p class="MsoPlainText" style="text-align: justify;"><span
 style="font-size: 9pt;">-rw-r--r--<span style="">&nbsp;&nbsp; </span>1
mmm01<span style="">&nbsp;&nbsp;&nbsp; </span>system<span style="">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>4144 Jun<span style="">&nbsp; </span>4 16:45 namelist.input<o:p></o:p></span></p>
<p class="MsoPlainText" style="text-align: justify;"><span
 style="font-size: 9pt;">-rw-r--r--<span style="">&nbsp;&nbsp; </span>1
mmm01<span style="">&nbsp;&nbsp;&nbsp; </span>system<span style="">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>2285 Jun<span style="">&nbsp; </span>4 16:45 namelist.3dvar<o:p></o:p></span></p>
<p class="MsoPlainText" style="text-align: justify;"><span
 style="font-size: 9pt;">-rw-r--r--<span style="">&nbsp;&nbsp; </span>1
mmm01<span style="">&nbsp;&nbsp;&nbsp; </span>system<span style="">&nbsp;&nbsp;
</span>4638396 Jun<span style="">&nbsp;
</span>4 16:50 DAProg_3DVAR.analincs<o:p></o:p></span></p>
<p class="MsoPlainText" style="text-align: justify;"><span
 style="font-size: 9pt;">-rw-r--r--<span style="">&nbsp;&nbsp; </span>1
mmm01<span style="">&nbsp;&nbsp;&nbsp; </span>system<span style="">&nbsp;&nbsp;
</span>4638396 Jun<span style="">&nbsp;
</span>4 16:50 DAProg_3DVAR.analysis<o:p></o:p></span></p>
<p class="MsoPlainText" style="text-align: justify;"><span
 style="font-size: 9pt;">-rw-r--r--<span style="">&nbsp;&nbsp; </span>1
mmm01<span style="">&nbsp;&nbsp;&nbsp; </span>system<span style="">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>2156 Jun<span style="">&nbsp; </span>4 16:50
DAProg_3DVAR.cost_fn<o:p></o:p></span></p>
<p class="MsoPlainText" style="text-align: justify;"><span
 style="font-size: 9pt;">-rw-r--r--<span style="">&nbsp;&nbsp; </span>1
mmm01<span style="">&nbsp;&nbsp;&nbsp; </span>system<span style="">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>2156 Jun<span style="">&nbsp; </span>4 16:50
DAProg_3DVAR.cost_fn_grad<o:p></o:p></span></p>
<p class="MsoPlainText" style="text-align: justify;"><span
 style="font-size: 9pt;">-rw-r--r--<span style="">&nbsp;&nbsp; </span>1
mmm01<span style="">&nbsp;&nbsp;&nbsp; </span>system<span style="">&nbsp;&nbsp;&nbsp;&nbsp;
</span>19821 Jun<span style="">&nbsp; </span>4 16:50
DAProg_3DVAR.statistics<o:p></o:p></span></p>
<p class="MsoPlainText" style="text-align: justify;"><span
 style="font-size: 9pt;">-rw-r--r--<span style="">&nbsp;&nbsp; </span>1
mmm01<span style="">&nbsp;&nbsp;&nbsp; </span>system<span style="">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>6097 Jun<span style="">&nbsp; </span>4 16:50 da_3dvar.out<o:p></o:p></span></p>
<p class="MsoPlainText" style="text-align: justify;"><span
 style="font-size: 9pt;">-rw-r--r--<span style="">&nbsp;&nbsp; </span>1
mmm01<span style="">&nbsp;&nbsp;&nbsp; </span>system<span style="">&nbsp;&nbsp;&nbsp;
</span>806707 Jun<span style="">&nbsp;
</span>4 16:50 fort.47<o:p></o:p></span></p>
<p class="MsoPlainText" style="text-align: justify;"><span
 style="font-size: 9pt;">-rw-r--r--<span style="">&nbsp;&nbsp; </span>1
mmm01<span style="">&nbsp;&nbsp;&nbsp; </span>system<span style="">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>1182 Jun<span style="">&nbsp; </span>4 16:50 fort.48<o:p></o:p></span></p>
<p class="MsoPlainText" style="text-align: justify;"><span
 style="font-size: 9pt;">-rw-r--r--<span style="">&nbsp;&nbsp; </span>1
mmm01<span style="">&nbsp;&nbsp;&nbsp; </span>system<span style="">&nbsp;&nbsp;
</span>3465430 Jun<span style="">&nbsp;
</span>4 16:50 fort.50<o:p></o:p></span></p>
<p class="MsoPlainText" style="text-align: justify;"><span
 style="font-size: 9pt;">-rw-r--r--<span style="">&nbsp;&nbsp; </span>1
mmm01<span style="">&nbsp;&nbsp;&nbsp; </span>system<span style="">&nbsp;&nbsp;
</span>3274840 Jun<span style="">&nbsp;
</span>4 16:50 inc<o:p></o:p></span></p>
<p style="text-align: justify;"><span style="font-family: Arial;">The
most important
output files here are <o:p></o:p></span></p>
<p style="text-align: justify;"><i><span style="font-family: Arial;"><a
 href="http://www.mmm.ucar.edu/wrf/WG4/tutorial/DA_3DVAR_print.out.txt">da_3dvar.out</a>:
</span></i><span style="font-family: Arial;">Text file containing
information
output as 3D-Var is running. Again, there is a host of information on
number of
observations, minimization, timings etc. <o:p></o:p></span></p>
<p style="text-align: justify;"><i><span style="font-family: Arial;"><a
 href="http://www.mmm.ucar.edu/wrf/WG4/tutorial/DAProg_3DVAR.statistics.txt">DAProg_3DVAR.statistics</a>:
</span></i><span style="font-family: Arial;">Text file containing O-B,
O-A
statistics (minimum, maximum, mean and standard deviation) for each
observation
type and variable. This information is very useful in diagnosing how
3DVAR has
used different components of the observing system. Also contained are
A-B
statistics i.e. statistics of the analysis increments for each model
variable
at each model level. This information is very useful in checking the
range of
analysis increment values found in the analysis, and where they are in
the
grid.<o:p></o:p></span></p>
<p style="text-align: justify;"><i><span style="font-family: Arial;"><a
 href="http://www.mmm.ucar.edu/wrf/WG4/tutorial/DAProg_3DVAR.cost_fn.txt">DAPROG_3DVAR.cost_fn</a>:
</span></i><span style="font-family: Arial;">Text file containing
values of the components
of the cost function at each minimization iteration.<o:p></o:p></span></p>
<p style="text-align: justify;"><i><span style="font-family: Arial;"><a
 href="http://www.mmm.ucar.edu/wrf/WG4/tutorial/DAProg_3DVAR.cost_fn_grad.txt">DAPROG_3DVAR.cost_fn_grad</a>:
</span></i><span style="font-family: Arial;">Text file containing
values of the
components of the gradient of the cost function at each minimization
iteration.<o:p></o:p></span></p>
<p style="text-align: justify;"><i><span style="font-family: Arial;">inc:WRF</span></i><span
 style="font-family: Arial;"> format file containing analysis
increments (this is
for diagnostics only).<o:p></o:p></span></p>
<p style="text-align: justify;"><i><span style="font-family: Arial;">?:
</span></i><span style="font-family: Arial;">WRF format file containing
the analysis<o:p></o:p></span></p>
<p style="text-align: justify;"><span style="font-family: Arial;">Take
time to look
through the textual output files to ensure you understand how 3DVAR has
performed.
For example, <o:p></o:p></span></p>
<p
 style="margin-left: 0.5in; text-align: justify; text-indent: -0.25in;"><!--[if !supportLists]--><span
 style="font-family: Symbol;">&middot;<span
 style="font-family: &quot;Times New Roman&quot;; font-style: normal; font-variant: normal; font-weight: normal; font-size: 7pt; line-height: normal; font-stretch: normal; font-size-adjust: none;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><!--[endif]--><span style="font-family: Arial;">How
closely has 3D-Var
fitted individual observation types? - Look in the <i><a
 href="http://www.mmm.ucar.edu/wrf/WG4/tutorial/DAProg_3DVAR.statistics.txt">DAProg_3DVAR.statistics</a>
</i>file to compare the O-B and O-A statistics.<o:p></o:p></span></p>
<p
 style="margin-left: 0.5in; text-align: justify; text-indent: -0.25in;"><!--[if !supportLists]--><span
 style="font-family: Symbol;">&middot;<span
 style="font-family: &quot;Times New Roman&quot;; font-style: normal; font-variant: normal; font-weight: normal; font-size: 7pt; line-height: normal; font-stretch: normal; font-size-adjust: none;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><!--[endif]--><span style="font-family: Arial;">How big
are the
analysis increments? &#8211; Again, look in the <i><a
 href="http://www.mmm.ucar.edu/wrf/WG4/tutorial/DAProg_3DVAR.statistics.txt">DAProg_3DVAR.statistics</a>
</i>file to see minimum/maximum values of A-B for each variable.<o:p></o:p></span></p>
<p
 style="margin-left: 0.5in; text-align: justify; text-indent: -0.25in;"><!--[if !supportLists]--><span
 style="font-family: Symbol;">&middot;<span
 style="font-family: &quot;Times New Roman&quot;; font-style: normal; font-variant: normal; font-weight: normal; font-size: 7pt; line-height: normal; font-stretch: normal; font-size-adjust: none;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><!--[endif]--><span style="font-family: Arial;">How long
did 3D-Var take
to converge? Is it converged? &#8211; Look in the <i><a
 href="http://www.mmm.ucar.edu/wrf/WG4/tutorial/DA_3DVAR_print.out.txt">da_3dvar.out</a>
</i>file, which will indicate the number of iterations taken by 3D-Var
to
converge. If this is the same as the maximum number of iterations
specified in
the namelist (DA_NTMAX) then you may need to increase this value to
ensure
convergence is achieved.<o:p></o:p></span></p>
<p style="text-align: justify;"><b><u><span style="font-family: Arial;">5.
What
next?</span></u></b><u><o:p></o:p></u></p>
<p style="text-align: justify;"><span style="font-family: Arial;">OK,
you&#8217;ve run 3D-Var, checked out the diagnostics and are confident things
are OK. Before running
a forecast, you must first modify the tendencies within the lateral
boundary
condition files to be consistent with the new 3D-Var initial conditions.<o:p></o:p></span></p>
<p style="text-align: justify;"><u><span style="font-family: Arial;">g)
Updating
lateral boundary conditions (to come)<o:p></o:p></span></u></p>
<p style="text-align: justify;"><span
 style="font-family: Arial; color: red;">As this
stage is not yet available, you&#8217;ve finished the WRF 3D-Var tutorial
Please direct
questions and comments to </span><span
 style="font-family: Arial; color: rgb(0, 0, 153);"><a
 href="mailto:wrfhelp@wrf-model.org"><span
 style="font-family: &quot;Times New Roman&quot;;">wrfhelp@wrf-model.org</span></a></span><span
 style="font-family: Arial; color: red;">!!!<b><o:p></o:p></b></span></p>
<div class="MsoNormal" align="center" style="text-align: center;">
<hr size="2" width="100%" align="center"></div>
<p><b><span style="font-family: Arial;">Miscellanies:</span></b><span
 style="">&nbsp; </span></p>
<div class="MsoNormal" align="center" style="text-align: center;">
<hr size="2" width="100%" align="center"></div>
<p><b><span style="font-family: Arial;">Trouble Shooting:</span></b> <span
 style="font-family: Arial;">If you have questions, ask </span><span
 style="font-family: Arial; color: rgb(0, 0, 153);"><a
 href="mailto:wrfhelp@wrf-model.org"><span
 style="font-family: &quot;Times New Roman&quot;;">wrfhelp@wrf-model.org</span></a></span><span
 style="font-family: Arial;">.</span> </p>
<div class="MsoNormal" align="center" style="text-align: center;">
<hr size="2" width="100%" align="center"></div>
<p class="MsoNormal" align="center" style="text-align: center;"><span
 style="font-family: Arial;"><a
 href="http://www.mmm.ucar.edu/wrf/WG4/tutorial/wrf3dvar_tutorial.htm">Return
to
3DVAR Tutorial Page</a></span><span style="color: windowtext;"><o:p></o:p></span></p>
</div>
</body>
</html>
