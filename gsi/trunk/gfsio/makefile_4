LIB     = ../lib/libgfsio_4.a
INCMOD  = ../include/gfsio_4
FC      = mpif90
FFLAGS  = -O3 -FR -I$(INCMOD)
FFLAGB  = -O3
#FFLAGS = -g -C -qextchk -qflttrap -qnosave -O3 -q free=f90 -I$(INCMOD)
#FFLAGB = -g -C -qextchk -qflttrap -qnosave -O3 -q fixed
AR      = ar
ARFLAGS = -rv 

$(LIB): $(LIB)(gfsio_module.o) $(LIB)(bafrio.o)
$(LIB)(bafrio.o):       bafrio.f
	$(FC) -c $(FFLAGB) $<
	$(AR) $(ARFLAGS) $@ $*.o
	rm -f $*.o
.f.a:
	$(FC) -c $(FFLAGS) $<
	$(AR) $(ARFLAGS) $@ $*.o
	rm -f $*.o
	mv $*.mod $(INCMOD)

