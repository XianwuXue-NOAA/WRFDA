README 
WRF-Var (4D) version 2.2

Xin Zhang 
Hans Huang

04/18/07

From Version 2.2, WRF 4DVAR system begin to use wrfvar trunk , wrf trunk and wrfplus. 

 To setup the system  :

 (The version numbers are the last tested version.)

1, Check out wrfvar trunk (version 2472)
   svn co https://svn-wrf-var.cgd.ucar.edu/trunk wrfvar

2, Check out wrfplus (version 2461)
   svn co https://svn-wrf-var.cgd.ucar.edu/branches/BR_2005workshop wrfplus

3, Check out wrf trunk (version 2292)
   svn co https://svn-wrf-model.cgd.ucar.edu/trunk wrf

4, cp wrfplus/Docs/parallel/wrf/Registry/Registry.EM.r2285 wrf/Registry/Registry.EM

5, Compile wrfvar trunk 
   cd  wrfvar
   source setup.csh g95/xlf
   ./configure wrfvar (select 1, if you like, you can change the optimization level to O2)
   ./compile wrfvar

6, Compile wrf trunk (use xlf)
   cd wrf
   ./configure (select 1)
   edit configure.wrf, add -lSystemStubs at the end of LIB
   ./compile wrf
   cp wrfvar/inc/namelist_script_wrf_wps_2004.inc inc/namelist_script.inc

7, Compile wrfplus (use xlf)
   cd wrfplus
   ./configure wrfplus (select 1)
   ./compile wrf (2 times)
   (note: make sure the namelist_script.inc is existed in inc/ diretory, if deleted by "clean -a", use "svn revert inc/namelist_script.inc to restore)
   
8, Run the testdata 
   the test script locate in wrfplus/scripts/da_run_suite_wrapper_test_1pe.ksh

Note: The WRF 4DVAR home directory is REL_DIR  
      the input dataset directory is DAT_DIR
      the output directory is EXP_DIR, the print out is in html format now, you can use lynx to see the output (looking for the index.html).
      for 4dvar, set NL_VAR4D = true, otherwise, set NL_VAR4D = false

