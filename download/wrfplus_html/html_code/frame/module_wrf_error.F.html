<HTML> <BODY BGCOLOR=#eeddee LINK=#0000aa VLINK=#0000ff ALINK=#ff0000 ><BASE TARGET="bottom_target"><PRE><a name='1'>
<font color=#447700>!WRF:DRIVER_LAYER:UTIL<a name='2'></font>
<font color=#447700>!<a name='3'></font>
<a name='4'>
<A NAME='MODULE_WRF_ERROR'><A href='../../html_code/frame/module_wrf_error.F.html#MODULE_WRF_ERROR' TARGET='top_target'><IMG SRC="../../gif/bar_purple.gif" border=0></A><a name='5'>
<font color=#993300>MODULE </font><font color=#cc0000>module_wrf_error</font> <A href='../../call_to/MODULE_WRF_ERROR.html' TARGET='index'>74</A><a name='6'>
  INTEGER           :: wrf_debug_level = 0<a name='7'>
  CHARACTER*256     :: wrf_err_message<a name='8'>
CONTAINS<a name='9'>
<a name='10'>
<A NAME='WRF_AT_DEBUG_LEVEL'><A href='../../html_code/frame/module_wrf_error.F.html#WRF_AT_DEBUG_LEVEL' TARGET='top_target'><IMG SRC="../../gif/bar_green.gif" border=0></A><a name='11'>
  LOGICAL <font color=#993300>FUNCTION </font><font color=#cc0000>wrf_at_debug_level</font> ( level )<a name='12'>
    IMPLICIT NONE<a name='13'>
    INTEGER , INTENT(IN) :: level<a name='14'>
    wrf_at_debug_level = ( level .LE. wrf_debug_level )<a name='15'>
    RETURN<a name='16'>
  END FUNCTION wrf_at_debug_level<a name='17'>
<a name='18'>
<A NAME='INIT_MODULE_WRF_ERROR'><A href='../../html_code/frame/module_wrf_error.F.html#INIT_MODULE_WRF_ERROR' TARGET='top_target'><IMG SRC="../../gif/bar_red.gif" border=0></A><a name='19'>
  <font color=#993300>SUBROUTINE </font><font color=#cc0000>init_module_wrf_error</font><a name='20'>
  END SUBROUTINE init_module_wrf_error<a name='21'>
<a name='22'>
END MODULE module_wrf_error<a name='23'>
<a name='24'>
<A NAME='SET_WRF_DEBUG_LEVEL'><A href='../../html_code/frame/module_wrf_error.F.html#SET_WRF_DEBUG_LEVEL' TARGET='top_target'><IMG SRC="../../gif/bar_red.gif" border=0></A><a name='25'>
  <font color=#993300>SUBROUTINE </font><font color=#cc0000>set_wrf_debug_level</font> ( level ) <A href='../../call_to/SET_WRF_DEBUG_LEVEL.html' TARGET='index'>9</A>,<A href='../../call_from/SET_WRF_DEBUG_LEVEL.html' TARGET='index'>1</A><a name='26'>
    USE <A href='../../html_code/frame/module_wrf_error.F.html#MODULE_WRF_ERROR'>module_wrf_error</A><A href='../../html_code/frame/module_wrf_error.F.html#SET_WRF_DEBUG_LEVEL' TARGET='bottom_target'><IMG SRC="../../gif/cyan.gif" border=0></a><A NAME="MODULE_WRF_ERROR_19"><a name='27'>
    IMPLICIT NONE<a name='28'>
    INTEGER , INTENT(IN) :: level<a name='29'>
    wrf_debug_level = level<a name='30'>
    RETURN<a name='31'>
  END SUBROUTINE set_wrf_debug_level<a name='32'>
<a name='33'>
<A NAME='GET_WRF_DEBUG_LEVEL'><A href='../../html_code/frame/module_wrf_error.F.html#GET_WRF_DEBUG_LEVEL' TARGET='top_target'><IMG SRC="../../gif/bar_red.gif" border=0></A><a name='34'>
  <font color=#993300>SUBROUTINE </font><font color=#cc0000>get_wrf_debug_level</font> ( level ) <A href='../../call_to/GET_WRF_DEBUG_LEVEL.html' TARGET='index'>2</A>,<A href='../../call_from/GET_WRF_DEBUG_LEVEL.html' TARGET='index'>1</A><a name='35'>
    USE <A href='../../html_code/frame/module_wrf_error.F.html#MODULE_WRF_ERROR'>module_wrf_error</A><A href='../../html_code/frame/module_wrf_error.F.html#GET_WRF_DEBUG_LEVEL' TARGET='bottom_target'><IMG SRC="../../gif/cyan.gif" border=0></a><A NAME="MODULE_WRF_ERROR_20"><a name='36'>
    IMPLICIT NONE<a name='37'>
    INTEGER , INTENT(OUT) :: level<a name='38'>
    level = wrf_debug_level<a name='39'>
    RETURN<a name='40'>
  END SUBROUTINE get_wrf_debug_level<a name='41'>
<a name='42'>
<a name='43'>
<A NAME='WRF_DEBUG'><A href='../../html_code/frame/module_wrf_error.F.html#WRF_DEBUG' TARGET='top_target'><IMG SRC="../../gif/bar_red.gif" border=0></A><a name='44'>
<font color=#993300>SUBROUTINE </font><font color=#cc0000>wrf_debug</font>( level , str ) <A href='../../call_to/WRF_DEBUG.html' TARGET='index'>275</A>,<A href='../../call_from/WRF_DEBUG.html' TARGET='index'>3</A><a name='45'>
  USE <A href='../../html_code/frame/module_wrf_error.F.html#MODULE_WRF_ERROR'>module_wrf_error</A><A href='../../html_code/frame/module_wrf_error.F.html#WRF_DEBUG' TARGET='bottom_target'><IMG SRC="../../gif/cyan.gif" border=0></a><A NAME="MODULE_WRF_ERROR_21"><a name='46'>
  IMPLICIT NONE<a name='47'>
  CHARACTER*(*) str<a name='48'>
  INTEGER , INTENT (IN) :: level<a name='49'>
  INTEGER               :: debug_level<a name='50'>
  CALL <A href='../../html_code/frame/module_wrf_error.F.html#GET_WRF_DEBUG_LEVEL'>get_wrf_debug_level</A><A href='../../html_code/frame/module_wrf_error.F.html#WRF_DEBUG' TARGET='bottom_target'><IMG SRC="../../gif/cyan.gif" border=0></a><A NAME="GET_WRF_DEBUG_LEVEL_1">( debug_level )<a name='51'>
  IF ( level .LE. debug_level ) THEN<a name='52'>
    CALL <A href='../../html_code/frame/module_wrf_error.F.html#WRF_MESSAGE'>wrf_message</A><A href='../../html_code/frame/module_wrf_error.F.html#WRF_DEBUG' TARGET='bottom_target'><IMG SRC="../../gif/cyan.gif" border=0></a><A NAME="WRF_MESSAGE_29">( str )<a name='53'>
  ENDIF<a name='54'>
  RETURN<a name='55'>
END SUBROUTINE wrf_debug<a name='56'>
<a name='57'>
<A NAME='WRF_MESSAGE'><A href='../../html_code/frame/module_wrf_error.F.html#WRF_MESSAGE' TARGET='top_target'><IMG SRC="../../gif/bar_red.gif" border=0></A><a name='58'>
<font color=#993300>SUBROUTINE </font><font color=#cc0000>wrf_message</font>( str ) <A href='../../call_to/WRF_MESSAGE.html' TARGET='index'>135</A>,<A href='../../call_from/WRF_MESSAGE.html' TARGET='index'>1</A><a name='59'>
  USE <A href='../../html_code/frame/module_wrf_error.F.html#MODULE_WRF_ERROR'>module_wrf_error</A><A href='../../html_code/frame/module_wrf_error.F.html#WRF_MESSAGE' TARGET='bottom_target'><IMG SRC="../../gif/cyan.gif" border=0></a><A NAME="MODULE_WRF_ERROR_22"><a name='60'>
#ifdef WRF_ESMF_LOGERR<a name='61'>
  USE ESMF_Mod<a name='62'>
#endif<a name='63'>
  IMPLICIT NONE<a name='64'>
  CHARACTER*(*) str<a name='65'>
#if defined( DM_PARALLEL ) &amp;&amp; <font color=#447700>! defined( STUBMPI) <a name='66'></font>
  write(0,*) str<a name='67'>
#endif<a name='68'>
  print*, str<a name='69'>
#ifdef WRF_ESMF_LOGERR<a name='70'>
  CALL ESMF_LogWrite( str, ESMF_LOG_INFO )<a name='71'>
#endif<a name='72'>
END SUBROUTINE wrf_message<a name='73'>
<a name='74'>
<font color=#447700>! intentionally write to stderr only<a name='75'></font>
<A NAME='WRF_MESSAGE2'><A href='../../html_code/frame/module_wrf_error.F.html#WRF_MESSAGE2' TARGET='top_target'><IMG SRC="../../gif/bar_red.gif" border=0></A><a name='76'>
<font color=#993300>SUBROUTINE </font><font color=#cc0000>wrf_message2</font>( str ) <A href='../../call_to/WRF_MESSAGE2.html' TARGET='index'>3</A>,<A href='../../call_from/WRF_MESSAGE2.html' TARGET='index'>1</A><a name='77'>
  USE <A href='../../html_code/frame/module_wrf_error.F.html#MODULE_WRF_ERROR'>module_wrf_error</A><A href='../../html_code/frame/module_wrf_error.F.html#WRF_MESSAGE2' TARGET='bottom_target'><IMG SRC="../../gif/cyan.gif" border=0></a><A NAME="MODULE_WRF_ERROR_23"><a name='78'>
#ifdef WRF_ESMF_LOGERR<a name='79'>
  USE ESMF_Mod<a name='80'>
#endif<a name='81'>
  IMPLICIT NONE<a name='82'>
  CHARACTER*(*) str<a name='83'>
  write(0,*) str<a name='84'>
#ifdef WRF_ESMF_LOGERR<a name='85'>
  CALL ESMF_LogWrite( str, ESMF_LOG_INFO )<a name='86'>
#endif<a name='87'>
END SUBROUTINE wrf_message2<a name='88'>
<a name='89'>
<A NAME='WRF_ERROR_FATAL3'><A href='../../html_code/frame/module_wrf_error.F.html#WRF_ERROR_FATAL3' TARGET='top_target'><IMG SRC="../../gif/bar_red.gif" border=0></A><a name='90'>
<font color=#993300>SUBROUTINE </font><font color=#cc0000>wrf_error_fatal3</font>( file_str, line, str ) <A href='../../call_to/WRF_ERROR_FATAL3.html' TARGET='index'>2</A>,<A href='../../call_from/WRF_ERROR_FATAL3.html' TARGET='index'>10</A><a name='91'>
  USE <A href='../../html_code/frame/module_wrf_error.F.html#MODULE_WRF_ERROR'>module_wrf_error</A><A href='../../html_code/frame/module_wrf_error.F.html#WRF_ERROR_FATAL3' TARGET='bottom_target'><IMG SRC="../../gif/cyan.gif" border=0></a><A NAME="MODULE_WRF_ERROR_24"><a name='92'>
  IMPLICIT NONE<a name='93'>
  CHARACTER*(*) file_str<a name='94'>
  INTEGER , INTENT (IN) :: line  <font color=#447700>! only print file and line if line &gt; 0<a name='95'></font>
  CHARACTER*(*) str<a name='96'>
  CHARACTER*256 :: line_str<a name='97'>
<a name='98'>
  write(line_str,'(i6)') line<a name='99'>
#if defined( DM_PARALLEL ) &amp;&amp; <font color=#447700>! defined( STUBMPI )<a name='100'></font>
  CALL <A href='../../html_code/frame/module_wrf_error.F.html#WRF_MESSAGE'>wrf_message</A><A href='../../html_code/frame/module_wrf_error.F.html#WRF_ERROR_FATAL3' TARGET='bottom_target'><IMG SRC="../../gif/cyan.gif" border=0></a><A NAME="WRF_MESSAGE_30">( '-------------- FATAL CALLED ---------------' )<a name='101'>
  <font color=#447700>! only print file and line if line is positive<a name='102'></font>
  IF ( line &gt; 0 ) THEN<a name='103'>
    CALL <A href='../../html_code/frame/module_wrf_error.F.html#WRF_MESSAGE'>wrf_message</A><A href='../../html_code/frame/module_wrf_error.F.html#WRF_ERROR_FATAL3' TARGET='bottom_target'><IMG SRC="../../gif/cyan.gif" border=0></a><A NAME="WRF_MESSAGE_31">( 'FATAL CALLED FROM FILE:  '//file_str//'  LINE:  '//TRIM(line_str) )<a name='104'>
  ENDIF<a name='105'>
  CALL <A href='../../html_code/frame/module_wrf_error.F.html#WRF_MESSAGE'>wrf_message</A><A href='../../html_code/frame/module_wrf_error.F.html#WRF_ERROR_FATAL3' TARGET='bottom_target'><IMG SRC="../../gif/cyan.gif" border=0></a><A NAME="WRF_MESSAGE_32">( str )<a name='106'>
  CALL <A href='../../html_code/frame/module_wrf_error.F.html#WRF_MESSAGE'>wrf_message</A><A href='../../html_code/frame/module_wrf_error.F.html#WRF_ERROR_FATAL3' TARGET='bottom_target'><IMG SRC="../../gif/cyan.gif" border=0></a><A NAME="WRF_MESSAGE_33">( '-------------------------------------------' )<a name='107'>
#else<a name='108'>
  CALL <A href='../../html_code/frame/module_wrf_error.F.html#WRF_MESSAGE2'>wrf_message2</A><A href='../../html_code/frame/module_wrf_error.F.html#WRF_ERROR_FATAL3' TARGET='bottom_target'><IMG SRC="../../gif/cyan.gif" border=0></a><A NAME="WRF_MESSAGE2_1">( '-------------- FATAL CALLED ---------------' )<a name='109'>
  <font color=#447700>! only print file and line if line is positive<a name='110'></font>
  IF ( line &gt; 0 ) THEN<a name='111'>
    CALL <A href='../../html_code/frame/module_wrf_error.F.html#WRF_MESSAGE'>wrf_message</A><A href='../../html_code/frame/module_wrf_error.F.html#WRF_ERROR_FATAL3' TARGET='bottom_target'><IMG SRC="../../gif/cyan.gif" border=0></a><A NAME="WRF_MESSAGE_34">( 'FATAL CALLED FROM FILE:  '//file_str//'  LINE:  '//TRIM(line_str) )<a name='112'>
  ENDIF<a name='113'>
  CALL <A href='../../html_code/frame/module_wrf_error.F.html#WRF_MESSAGE2'>wrf_message2</A><A href='../../html_code/frame/module_wrf_error.F.html#WRF_ERROR_FATAL3' TARGET='bottom_target'><IMG SRC="../../gif/cyan.gif" border=0></a><A NAME="WRF_MESSAGE2_2">( str )<a name='114'>
  CALL <A href='../../html_code/frame/module_wrf_error.F.html#WRF_MESSAGE2'>wrf_message2</A><A href='../../html_code/frame/module_wrf_error.F.html#WRF_ERROR_FATAL3' TARGET='bottom_target'><IMG SRC="../../gif/cyan.gif" border=0></a><A NAME="WRF_MESSAGE2_3">( '-------------------------------------------' )<a name='115'>
#endif<a name='116'>
  CALL <A href='../../html_code/frame/module_dm_stubs.F.html#WRF_ABORT'>wrf_abort</A><A href='../../html_code/frame/module_wrf_error.F.html#WRF_ERROR_FATAL3' TARGET='bottom_target'><IMG SRC="../../gif/cyan.gif" border=0></a><A NAME="WRF_ABORT_2"><a name='117'>
END SUBROUTINE wrf_error_fatal3<a name='118'>
<a name='119'>
<A NAME='WRF_ERROR_FATAL'><A href='../../html_code/frame/module_wrf_error.F.html#WRF_ERROR_FATAL' TARGET='top_target'><IMG SRC="../../gif/bar_red.gif" border=0></A><a name='120'>
<font color=#993300>SUBROUTINE </font><font color=#cc0000>wrf_error_fatal</font>( str ) <A href='../../call_to/WRF_ERROR_FATAL.html' TARGET='index'>260</A>,<A href='../../call_from/WRF_ERROR_FATAL.html' TARGET='index'>2</A><a name='121'>
  USE <A href='../../html_code/frame/module_wrf_error.F.html#MODULE_WRF_ERROR'>module_wrf_error</A><A href='../../html_code/frame/module_wrf_error.F.html#WRF_ERROR_FATAL' TARGET='bottom_target'><IMG SRC="../../gif/cyan.gif" border=0></a><A NAME="MODULE_WRF_ERROR_25"><a name='122'>
  IMPLICIT NONE<a name='123'>
  CHARACTER*(*) str<a name='124'>
  CALL <A href='../../html_code/frame/module_wrf_error.F.html#WRF_ERROR_FATAL3'>wrf_error_fatal3</A><A href='../../html_code/frame/module_wrf_error.F.html#WRF_ERROR_FATAL' TARGET='bottom_target'><IMG SRC="../../gif/cyan.gif" border=0></a><A NAME="WRF_ERROR_FATAL3_1"> ( ' ', 0, str )<a name='125'>
END SUBROUTINE wrf_error_fatal<a name='126'>
<a name='127'>
<font color=#447700>! Check to see if expected value == actual value<a name='128'></font>
<font color=#447700>! If not, print message and exit.  <a name='129'></font>
<A NAME='WRF_CHECK_ERROR'><A href='../../html_code/frame/module_wrf_error.F.html#WRF_CHECK_ERROR' TARGET='top_target'><IMG SRC="../../gif/bar_red.gif" border=0></A><a name='130'>
<font color=#993300>SUBROUTINE </font><font color=#cc0000>wrf_check_error</font>( expected, actual, str, file_str, line ) <A href='../../call_to/WRF_CHECK_ERROR.html' TARGET='index'>74</A>,<A href='../../call_from/WRF_CHECK_ERROR.html' TARGET='index'>2</A><a name='131'>
  USE <A href='../../html_code/frame/module_wrf_error.F.html#MODULE_WRF_ERROR'>module_wrf_error</A><A href='../../html_code/frame/module_wrf_error.F.html#WRF_CHECK_ERROR' TARGET='bottom_target'><IMG SRC="../../gif/cyan.gif" border=0></a><A NAME="MODULE_WRF_ERROR_26"><a name='132'>
  IMPLICIT NONE<a name='133'>
  INTEGER , INTENT (IN) :: expected<a name='134'>
  INTEGER , INTENT (IN) :: actual<a name='135'>
  CHARACTER*(*) str<a name='136'>
  CHARACTER*(*) file_str<a name='137'>
  INTEGER , INTENT (IN) :: line<a name='138'>
  CHARACTER (LEN=512)   :: rc_str<a name='139'>
  CHARACTER (LEN=512)   :: str_with_rc<a name='140'>
<a name='141'>
  IF ( expected .ne. actual ) THEN<a name='142'>
    WRITE (rc_str,*) '  Routine returned error code = ',actual<a name='143'>
    str_with_rc = TRIM(str // rc_str)<a name='144'>
    CALL <A href='../../html_code/frame/module_wrf_error.F.html#WRF_ERROR_FATAL3'>wrf_error_fatal3</A><A href='../../html_code/frame/module_wrf_error.F.html#WRF_CHECK_ERROR' TARGET='bottom_target'><IMG SRC="../../gif/cyan.gif" border=0></a><A NAME="WRF_ERROR_FATAL3_2"> ( file_str, line, str_with_rc )<a name='145'>
  ENDIF<a name='146'>
END SUBROUTINE wrf_check_error<a name='147'>
<a name='148'>
<a name='149'>
</pre></body></html>