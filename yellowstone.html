<html>

<head>

<title>Using WRFDA on Yellowstone</title>

<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">

<meta name="KEYWORDS" content="meteorology, mesoscale, microscale, weather modeling, forecasting weather, weather prediction, predictability, cloud systems, boundary layers, surface-atmosphere interactions, convective cloud systems, atmospheric chemistry, precipitating weather systems, wildfire research, National Center for Atmospheric Research">

<meta name="DESCRIPTION" content="WRF Mesoscale Model Users homepage">

<meta name="ROBOTS" content="INDEX,FOLLOW">

<meta name="resource-type" content="document">

<meta http-equiv="expires" content="0">

<meta name="author" content="MMM Webmaster">

<meta name="copyright" content="Copyright (c) 2014 by UCAR">

<meta name="revisit-after" content="1 days">

<meta name="distribution" content="Global">

<meta name="rating" content="General">





<SCRIPT language=JavaScript src="scripts/menu_array.js" type=text/javascript></SCRIPT>

<SCRIPT language=JavaScript src="scripts/mmenu.js" type=text/javascript></SCRIPT>





<link href="images/wrfstyle.css" rel="stylesheet" type="text/css">



</head>



<body bgcolor="#FFFFFF" link="#000099" vlink="#000099" alink="#FF3300" leftmargin="0" topmargin="0" marginwidth="0" marginheight="0">

<table width="100%" border="0" cellspacing="0" cellpadding="0">

  <tr bgcolor="#000000">

    <td height="10" bgcolor="#000000"><div align="left"><img src="images/transgif.gif" width="1" height="1"></div>

    </td>

  </tr>

  <tr valign="top">

    <td height="10" bgcolor="#DDFFDD"><img src="images/header_new_cropped.png" height="56" border="0"></td>

  </tr>

  <tr bgcolor="#FFCC33">

    <td height="6" background="images/goldrule.jpg" bgcolor="#009933"><img src="images/goldrule.jpg" width="1" height="1"></td>

  </tr>

  <tr>

    <td height="34" bgcolor="#009933">&nbsp;</td>

  </tr>

  <tr>

    <td height="2" bgcolor="#ffcc66"><img src="images/transgif.gif" width="1" height="1"></td>

  </tr>

</table>

<table width="100%" height="91%" border="0" cellpadding="0" cellspacing="0" class="background">

  <tr>

    <td height="863" valign="top" bgcolor="#CBFFCD"><table width="780" border="0" cellpadding="0" cellspacing="0">

      <tr valign="top">

        <td width="117" height="865" bgcolor="#009933"><p>&nbsp;</p>

          <table width="117" border="0" align="center" cellpadding="0" cellspacing="0">
            <tr>
              <td><p align="center"><a href="pub-doc.html" class="leftnavlink">WRFDA Publications</a></p>
                <p align="center"><a href="technotes.html" class="leftnavlink">Technical Notes</a></p>
                <p align="center"><a href="Docs/user_guide_V3.6/WRFDA_Users_Guide.html" class="leftnavlink">User's Guide V3.6</a></p>
                <p align="center"><a href="Docs/user_guide_V3.5.1/WRFDA_Users_Guide.html" class="leftnavlink">User's Guide V3.5.1</a></p>
                <p align="center"><a href="Docs/user_guide_V3.5/WRFDA_Users_Guide.html" class="leftnavlink">User's Guide V3.5</a></p>
                <p align="center"><a href="Docs/user_guide_V3.4.1/users_guide_chap6.htm" class="leftnavlink">User's Guide V3.4.1</a></p>
                <p align="center"><a href="Docs/user_guide_V3.4/users_guide_chap6.htm" class="leftnavlink">User's Guide V3.4</a></p>
                <p align="center"><a href="Docs/user_guide_V3.3/users_guide_chap6.htm" class="leftnavlink">User's Guide V3.3</a></p>
                <p align="center"><a href="Docs/user_guide_V3.2.1/users_guide_chap6.htm" class="leftnavlink">User's Guide V3.2.1</a></p>
                <p align="center"><a href="Docs/user_guide_V3.2/users_guide_chap6.htm" class="leftnavlink">User's Guide V3.2</a></p>
                <p align="center"><a href="Docs/user_guide_V3.1.1/users_guide_chap6.htm" class="leftnavlink">User's Guide V3.1.1</a></p>
                <p align="center"><a href="Docs/user_guide_V3.1/users_guide_chap6.htm" class="leftnavlink">User's Guide V3.1</a></p>
                <p align="center"><a href="OnlineTutorial/index.html" class="leftnavlink">WRFDA Online Tutorial</a></p>
                <p align="center"><a href="how_to_compile.html" class="leftnavlink">How to compile WRFDA</a></p>
                <p align="center" style="border-width: 5px;border-style: solid;border-color: #CBFFCD;background-color: #CBFFCD;font-family: Arial; line-height: 10pt;font-weight: bold;">WRFDA on Yellowstone</p>
                <p align="center"><a href="readBUFR.html" class="leftnavlink">Reading BUFR files</a></p>
              </td>

            </tr>

          </table>

            <p>&nbsp;</p>          <p>&nbsp;</p>            <img src="images/shim112.gif" width="112" height="1"></td>

        <td bgcolor="#CBFFCD"><p>&nbsp;</p>

            <p class="pagetitle">WRFDA on Yellowstone</p>

            <p class="bodytext">Yellowstone is NCAR's high-performance supercomputer, used for research by NCAR, UCAR, and university users. The latest version of WRFDA (version 3.6) can be compiled and run using Yellowstone's default configuration, but some users may want to use different compilers. Here is a list of tested compilers, as well as the configurations which are known not to work:</p>
            <p style="padding-left: 45px"><table style="background-color:#DDFFDD;" width="100%" border="1" class="bodytable">
              <tr>
                <td><b>Compiler</b></td>
                <td style="text-align:center"><b>Version</b></td>
                <td><b>Status</b></td></tr>
              <tr>
                <td>Intel (ifort)</td>
                <td style="text-align:center">12.1.5<br>13.0.1</td>
                <td>All tests pass!</td></tr>
              <tr>
                <td>Gnu (gfortran)</td>
                <td style="text-align:center">4.7.2<br>4.8.2</td>
                <td>All tests pass!</td></tr>
              <tr style="background-color:#DDDDAA;">
                <td rowspan="2";>PGI (pgf90)</td>
                <td style="text-align:center">13.3</td>
                <td><b>Compilation fails</b><br>See the <a href="known-prob.html">known problems</a> page for a fix that allows WRFDA to compile with PGI 13.3.</td></tr>
                <td style="text-align:center;background-color:#DDAAAA;">13.9</td>
                <td style="background-color:#DDAAAA;"><b>Compilation fails</b><br>No fix at this time; please use version 13.3 if you must use PGI.</td></tr>
              <tr style="background-color:#DDAAAA;">
                <td>Pathscale (pathf90)</td>
                <td style="text-align:center">all</td>
                <td><b>Compilation fails</b><br>PathScale can not be used with WRF or WRFDA.</td></tr>
            </table></p>


            <p class="pagetitle">Older versions</p>

            <p class="bodytext">In November 2012, NCAR officially brought the new supercomputer "Yellowstone" online, replacing the old <a href="https://www.cisl.ucar.edu/computers/gallery/ibm/bluefire.jsp">Bluefire machine</a>. Due to the architecture differences between Yellowstone (a Linux architecture with Intel, PGI, GNU, and Pathscale compilers) and Bluefire (an AIX architecture with xl compilers), there are some older versions of WRFDA that do not work as anticipated on Yellowstone. This page details the various older WRFDA versions that are known to work on Yellowstone, and the compilers with which they can be used, in addition to providing fixes for some known problems.</p>

            <p class="bodytext">Not all configurations have been tested, so if you encounter a problem running a version of WRFDA which is not listed here as a known problem, please contact <a href="wrfhelp.html">wrfhelp</a>.</p>

            <p class="pagetitle">Working configurations</p>
            <p class="bodytext">The following configurations have been tested and should run normally. All are dmpar (distributed-memory parallel) builds unless otherwise noted:</p>
            <p style="padding-left: 45px"><table style="background-color:#DDFFDD;" width="100%" border="1" class="bodytable">
              <tr>
                <th colspan="2" style="text-align: center;">Intel (ifort, icc)</th></tr>
              <tr>
                <td>WRFDA V3.5<br>&nbsp;and V3.5.1</td>
                <td>Compiles<br>Runs basic test case<br>Runs CRTM radiance test case</td></tr>
              <tr>
                <td>WRFDA V3.4.1</td>
                <td>Compiles using configuration option 15<br>Runs basic test case</td></tr>
              <tr>
                <td>WRFDA V3.4</td>
                <td>Compiles using configuration option 15<br>Runs basic test case</td></tr>
              <tr>
                <td>WRFDA V3.3.1</td>
                <td>Compiles using configuration option 11<br>Runs basic test case</td></tr>
              <tr>
                <td>WRFDA V3.2.1</td>
                <td>Compiles using configuration option 11<br>Runs basic test case</td></tr>
              <tr>
                <td>WRFDA V3.2</td>
                <td>Compiles using configuration option 11<br>Runs basic test case</td></tr>
              <tr>
                <th colspan="2" style="text-align: center;">GNU (gfortran, gcc)</th></tr>
              <tr>
                <td>WRFDA V3.5.1</td>
                <td>Compiles<br>Runs basic test case<br>Runs CRTM radiance test case</td></tr>
              <tr>
                <td>WRFDA V3.5</td>
                <td>Compiles<br>Runs basic test case<br>Runs CRTM radiance test case (see "Known problems with solutions" below)</td></tr>
            </table></p>

            <p class="pagetitle">Known problems with solutions</p>
            <p class="bodytext">Some problems with recent versions of WRFDA can not be fixed without some effort by the user. These problems and their solutions are offered below:</p>

            <p style="padding-left: 45px"><table style="background-color:#DDFFDD;" width="100%" border="1" class="bodytable">
              <tr>
                <th colspan="2" style="text-align: center;">GNU (gfortran, gcc)</th></tr>
              <tr>
                <td rowspan="2";>WRFDA V3.3.1&ndash;3.5</td>
                <td><b>Problem: </b> When reading BUFR/PREPBUFR files, WRFDA fails or hangs.</td></tr>
                <td><b>Solution: </b> Follow the instructions on <a href="readBufr.htm">this page</a>.</td></tr>
              <tr>
                <td rowspan="2";>WRFDA V3.3.1&ndash;3.4.1</td>
                <td><b>Problem: </b> Compilation fails with error "Graphite loop optimizations cannot be used"</td></tr>
                <td><b>Solution: </b> After running the configuration script (<code>./configure wrfda</code>) edit the "<code>configure.wrf
</code>" file to remove the text "-ftree-loop-linear" line 115 (where the variable "FCOPTIM" is defined). Then compile WRFDA.</td></tr>
              <tr>
                <th colspan="2" style="text-align: center;">Intel (ifort, icc)</th></tr>
              <tr>
                <td rowspan="2";>WRFDA V3.2&ndash;3.5</td>
                <td><b>Problem: </b> When reading BUFR/PREPBUFR files, WRFDA fails or hangs.</td></tr>
                <td><b>Solution: </b> Follow the instructions on <a href="Docs/readBufr.htm">this page</a>.</td></tr>
            </table></p>


            <p class="pagetitle">Older versions with major problems</p>
<!--            <p class="bodytext"><b>NOTE: We <em>HIGHLY</em> recommend using the latest version of WRFDA on Yellowstone. However, if you must use an older version, you can try the fixes below.</b></p>-->
            <p style="padding-left: 45px"><table style="background-color:#DDFFDD;" width="100%" border="1" class="bodytable">
              <tr>
                <th colspan="2" style="text-align: center;">Intel (ifort, icc)</th></tr>
              <tr>
                <td rowspan="2";>WRFDA V3.3</td>
                <td><b>Problem: </b> "Configure" script reports a compiler error and may remove files from the top directory.</td></tr>
                <td><b>Solution: </b> If the top directory, including the configuration scripts, has been blanked, you will need to unpack the code again from your original "WRFDAV3.3.TAR.gz" file. If you do not have this file you must <a href="download/get_source.html">re-download the WRFDA package</a>.</br>
                  Once this step is completed, download the <a href="http://www.mmm.ucar.edu/wrf/src/fix/configure_fix.tar">configure_fix.tar</a> file, and unpack it in the top WRFDA directory. This fix contains new "configure" script and a new "arch/configure_new.defaults" file. You should now be able to configure and compile WRFDA normally.</td></tr>
            </table></p>

            <p class="pagetitle">Non-working configurations</p>
            <p class="bodytext">The following configurations have known problems which are being investigated:</p>
            <p style="padding-left: 45px"><table style="background-color:#DDFFDD;" width="100%" border="1" class="bodytable">
              <tr>
                <th colspan="2" style="text-align: center;">Intel (ifort, icc)</th></tr>
              <tr>
                <td>WRFDA V3.3.1</td>
                <td>Configuration problem: likely netCDF-related. May still run successfully.</td></tr>
              <tr>
                <th colspan="2" style="text-align: center;">GNU (gfortran, gcc)</th></tr>
              <tr>
                <td>WRFDA V3.3</td>
                <td>Compilation failure: fails even in debug mode</td></tr>
              <tr>
                <th colspan="2" style="text-align: center;">PGI (pgf90, pgcc)</th></tr>
              <tr>
                <td>WRFDA V3.4&ndash;current</td>
                <td>Compilation fails when compiled with CRTM/BUFR libraries. This is a <a href="http://www.pgroup.com/userforum/viewtopic.php?t=3339&sid=7cb4c190d7933ce2849989c0e6c9d7b0">known bug in PGI version 12.5</a>; we are currently seeking a solution. Compilation is successful when using PGI 12.10, but WRFDA segfaults.</td></tr>
              <tr>
                <td>WRFDA V3.3.1</td>
                <td>Configuration problem: likely netCDF-related</td></tr>
              <tr>
                <th colspan="2" style="text-align: center;">PathScale (pathf90, pathcc)</th></tr>
              <tr>
                <td>WRFDA (All versions)</td>
                <td>Compilation error: PathScale is terrible. Will not support in the near future.</td></tr>
            </table></p>

            <p class="pagetitle">Planned tests</p>
            <p class="bodytext">The following configurations have not yet been tested, but we plan on testing them in the future:</p>
            <blockquote>
            <ul class="bodytext">
              <li><b>Intel (ifort, icc)</b></li>
                <ul><li>All supported versions tested</li></ul>
              <li><b>PGI (pgf90, pgcc)</b></li>
                <ul><li>WRFDA V3.2 through V3.3</li></ul>
              <li><b>GNU (gfortran, gcc)</b></li>
                <ul><li>WRFDA V3.2 through V3.3</li></ul>
              <li><b>Serial builds</b></li>
            </blockquote>
            <p class="bodytext">We do not plan on supporting earlier versions, but if you have a specific question you can contact <a href="wrfhelp.html">wrfhelp</a>.</p>
            <p class="pagetitle">Help</p>
            <p class="bodytext">If you need to run one of the version listed here as not working, or if you encounter a problem not listed here running WRFDA on Yellowstone, please contact <a href="wrfhelp.html">wrfhelp</a>.</p>


              <blockquote>&nbsp;</blockquote>
            </blockquote>                        

            <p align="center" class="detailtextRed">

              <script language="JavaScript">

<!--

document.write("updated " + document.lastModified);

// -->

                        </script>
</p>

            <p class="bodytext">&nbsp;            </p>            <br>

            <br>        <img src="images/transgif.gif" width="1" height="1"><img src="images/shim162.gif" width="162" height="1"></td>
        </tr>


    </table></td>
  </tr>

  <tr>

    <td height="50" bgcolor="#009933" class="detailtext">&nbsp;</td>
  </tr>
</table>

</body>

</html>

