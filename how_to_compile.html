<html>

<head>

<title>WRF Var Updates</title>

<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">

<meta name="KEYWORDS" content="meteorology, mesoscale, microscale, weather modeling, forecasting weather, weather prediction, predictability, cloud systems, boundary layers, surface-atmosphere interactions, convective cloud systems, atmospheric chemistry, precipitating weather systems, wildfire research, National Center for Atmospheric Research">

<meta name="DESCRIPTION" content="WRF Mesoscale Model Users homepage">

<meta name="ROBOTS" content="INDEX,FOLLOW">

<meta name="resource-type" content="document">

<meta http-equiv="expires" content="0">

<meta name="author" content="MMM Webmaster">

<meta name="copyright" content="Copyright (c) 2004 by UCAR">

<meta name="revisit-after" content="1 days">

<meta name="distribution" content="Global">

<meta name="rating" content="General">





<SCRIPT language=JavaScript src="scripts/menu_array.js" type=text/javascript></SCRIPT>

<SCRIPT language=JavaScript src="scripts/mmenu.js" type=text/javascript></SCRIPT>





<link href="../images/wrfstyle.css" rel="stylesheet" type="text/css">



<link href="../images/wrfstyle.css" rel="stylesheet" type="text/css">

<link href="images/wrfstyle.css" rel="stylesheet" type="text/css">
<style type="text/css">
<!--
.style1 {
	color: #FF0000;
	font-style: italic;
	font-weight: bold;
}
.style2 {color: #FF0000}
.style3 {color: #000000}
.style5 {color: #FF0000; font-weight: bold; }
-->
</style>
</head>



<body bgcolor="#FFFFFF" background="../images/back2.jpg" link="#000099" vlink="#000099" alink="#FF3300" leftmargin="0" topmargin="0" marginwidth="0" marginheight="0">

<table width="100%" border="0" cellspacing="0" cellpadding="0">

  <tr bgcolor="#000000">

    <td height="10" bgcolor="#000000"><div align="left"><img src="images/transgif.gif" width="1" height="1"></div>

    </td>

  </tr>

  <tr valign="top">

    <td height="10"><div align="left"><img src="images/header.jpg" width="566" height="56" border="0"></div></td>

  </tr>

  <tr bgcolor="#FFCC33">

    <td height="6" background="images/goldrule.jpg" bgcolor="#009933"><img src="images/goldrule.jpg" width="1" height="1"></td>

  </tr>

  <tr>

    <td height="34" bgcolor="#009933">&nbsp;</td>

  </tr>

  <tr>

    <td height="2" bgcolor="#ffcc66"><img src="images/transgif.gif" width="1" height="1"></td>

  </tr>

</table>

<table width="100%" height="89%" border="0" cellpadding="0" cellspacing="0" class="background">

  <tr>

    <td valign="top" bgcolor="#CBFFCD"><table width="994" border="0" align="left" cellpadding="0" cellspacing="0">

      <tr valign="top">
        <td width="116" height="790" valign="top" bgcolor="#009933"><p align="center">&nbsp;</p>
          <p align="center">&nbsp;</p>
          <p align="center"><a href="../docs/user_guide_V3/users_guide_chap6.htm#_Installing_WRF-Var" class="leftnavlink">How 
            
            to Compile?</a></p>
          <p align="center"><a href="../docs/user_guide_V3/users_guide_chap6.htm#_Running_WRF-Var_1" class="leftnavlink">How 
              
              to Run?</a></p>
          <p align="center" class="leftnavlink"><a href="updates.html" class="leftnavlink">WRF Var
            Updates</a></p>
          <p align="center"><a href="known-prob.html" class="leftnavlink">Known 
          Problems and Fixes</a></p></td>

        <td width="878" height="790" colspan="2" align="left" bgcolor="#CBFFCD"><p align="center">&nbsp;</p>
          <p align="left" class="pagetitle">Required Libraries: </p>
          <blockquote>
            <p>Before compiling the WRFDA code, it is necessary to have installed following mandatory libraries:</p>
            <ol>
              <li><a href="http://www.unidata.ucar.edu/downloads/netcdf/netcdf-3_6_1/index.jsp">NETCDF-3.6.1</a>, http://www.unidata.ucar.edu/downloads/netcdf/netcdf-3_6_1/index.jsp</li>
              <li><a href="http://netlib.org/blas/">BLAS</a>, http://netlib.org/blas/blas.tgz</li>
              <li><a href="http://netlib.org/lapack/">LAPACK-3.1.1</a> http://netlib.org/lapack/lapack-3.1.1.tgz</li>
            </ol>
            <p>If any of the NETCDF, BLAS, LAPACK  libraries are not available on the computer, they needs to be installed first. Assuming, for example, that these libraries have been installed in subdirectories of /usr/local, the necessary environment variables might be set with, for example:</p>
            <p>setenv BLAS   /usr/local/blas<br>
              setenv LAPACK /usr/local/lapack<br>
              setenv NETCDF   /usr/local/netcdf</p>
            <p>If you intend to use some advanced functions provided by WRFDA, you have to install additional libraries:</p>
            <ol>
              <li>If Prebufr observational data will be used as input, you have to install <a href="http://www.nco.ncep.noaa.gov/sib/decoders/BUFRLIB/BUFRLIB.tar">BUFR</a> library from http://www.nco.ncep.noaa.gov/sib/decoders/BUFRLIB/</li>
              <li>If MADIS observational data will be used as input, you have to install <a href="http://madis.noaa.gov/">MADIS</a> library from http://madis.noaa.gov/</li>
              <li>If radiance observations will be used with Radiative Trnasfer model from NCEP, in addition to <a href="http://www.nco.ncep.noaa.gov/sib/decoders/BUFRLIB/BUFRLIB.tar">BUFR</a> library, you have to install <a href="ftp://ftp.emc.ncep.noaa.gov/jcsda/CRTM/">CRTM</a> from ftp://ftp.emc.ncep.noaa.gov/jcsda/CRTM/</li>
              </ol>
            <blockquote>
              <p class="style1">Note: You have to make following changes to use the CRTM_REL1.2</p>
              <p>Index: da_transform_xtoy_crtm_adj.inc<br>
                ===================================================================<br>
                --- da_transform_xtoy_crtm_adj.inc      (revision 3543)<br>
                +++ da_transform_xtoy_crtm_adj.inc      (working copy)<br>
                @@ -310,7 +310,7 @@<br>
!Surface(1)%Ice_Roughness=0.0               ! NO Table offered, single example is ZERO<br>
end if<br>
Surface(1)%SensorData%n_channels = nchanl<br>
-     Surface(1)%SensorData%Sensor_ID  = wmo_sensor_id<br>
+     Surface(1)%SensorData%Select_WMO_Sensor_Id  = wmo_sensor_id<br>
Surface(1)%SensorData%Tb(1:nchanl) = iv%instid(inst)%tb_inv(1:nchanl,n) + &amp;<br>
iv%instid(inst)%tb_xb(1:nchanl,n)</p>
              <p>Index: da_transform_xtoy_crtm.inc<br>
                ===================================================================<br>
                --- da_transform_xtoy_crtm.inc  (revision 3543)<br>
                +++ da_transform_xtoy_crtm.inc  (working copy)<br>
                @@ -328,7 +328,7 @@<br>
                !Surface(1)%Ice_Roughness=0.0               ! NO Table offered, single egrid%xample is ZERO<br>
                end if<br>
                Surface(1)%SensorData%n_channels = nchanl<br>
                -     Surface(1)%SensorData%Sensor_ID  = wmo_sensor_id<br>
                +     Surface(1)%SensorData%Select_WMO_Sensor_Id  = wmo_sensor_id<br>
                Surface(1)%SensorData%Tb(1:nchanl) = iv%instid(inst)%tb_inv(1:nchanl,n) + &amp;<br>
                iv%instid(inst)%tb_xb(1:nchanl,n)<br>
              </p>
              <p>Index: da_get_innov_vector_crtm.inc<br>
                ===================================================================<br>
                --- da_get_innov_vector_crtm.inc        (revision 3543)<br>
                +++ da_get_innov_vector_crtm.inc        (working copy)<br>
                @@ -408,7 +408,7 @@<br>
                end if<br>
                if (nchanl &gt; 0) then<br>
                Surface(1)%SensorData%n_channels = nchanl<br>
                -            Surface(1)%SensorData%Sensor_ID  = wmo_sensor_id<br>
                +            Surface(1)%SensorData%Select_WMO_Sensor_Id  = wmo_sensor_id<br>
                Surface(1)%SensorData%Tb(1:nchanl) = ob%instid(inst)%tb(1:nchanl,n)<br>
                end if</p>
            </blockquote>
            <ol start="4">
              <li>If radiance observations will be used with Radiative Trnasfer model from UK Met Office, in addition to <a href="http://www.nco.ncep.noaa.gov/sib/decoders/BUFRLIB/BUFRLIB.tar">BUFR</a> library, you have to install <a href="http://www.metoffice.gov.uk/research/interproj/specialist_nwpsaf/rtm/rtm_rttov8.html">RTTOV</a> from http://www.metoffice.gov.uk/research/interproj/specialist_nwpsaf/rtm/rtm_rttov8.html (Users need to register first through a link at the top right of the page http://www.metoffice.gov.uk/science/creating/working_together/nwpsaf_public.html)</li>
            </ol>
            <p>Again, the necessary environment variables might be set with, for example:</p>
            <p>setenv BUFR   /usr/local/bufr<br>
              setenv MADIS /usr/local/madis<br>
              setenv CRTM /usr/local/crtm<br>
              setenv RTTOV   /usr/local/rttov</p>
            <p><span class="style2"><strong>Important :</strong><span class="style3"> If PGI, INTEL ,g95 or GFORTRAN compiler are available on a Linux/Mac computer, make sure all libraries are compiled/installed using the same compiler with the one to compile WRF-Var.</span></span></p>
            <p><span class="style5">Note: </span>These external libraries can be compiled by using the scripts under WRFDA/var/scripts/compile_external. </p>
          </blockquote>
          <blockquote>
            <p align="left"></p>
            <p align="left">The table below gives the details of the compilers and platforms on which each library was tested before release. </p>
            <div align="center">
              <table width="100%" border="1" align="center" cellpadding="1" cellspacing="1">
                <tr>
                  <th width="122" scope="col">&nbsp;</th>
                    <th width="76" align="center" scope="col">xlf</th>
                    <th width="104" scope="col"><div align="center">pgi</div></th>
                    <th width="141" scope="col"><div align="center">g95 (gcc version 4.0.3 (g95 0.91!) </div></th>
                    <th width="126" scope="col"><div align="center">
                        <p><a href="http://gcc.gnu.org/wiki/GFortran">gfortran(v4.3 above)</a></p>
                    </div></th>
                    <th width="102" scope="col"><div align="center">intel</div></th>
                  </tr>
                <tr>
                  <th scope="row"><span class="style2">* </span>NETCDF-3.6.1</th>
                    <td align="center"><div align="center"><strong>&radic;</strong></div></td>
                    <td><div align="center"><strong>&radic;</strong></div></td>
                    <td><div align="center"><strong>&radic;</strong></div></td>
                    <td><div align="center">
                      <p><strong>&radic;</strong></p>
                    </div></td>
                    <td><div align="center"><strong>&radic;</strong></div></td>
                  </tr>
                <tr>
                  <th scope="row"><span class="style2">* </span>BLAS</th>
                    <td align="center"><div align="center"><strong>&radic;</strong></div></td>
                    <td><div align="center"><strong>&radic;</strong></div></td>
                    <td><div align="center"><strong>&radic;</strong></div></td>
                    <td><div align="center"><strong>&radic;</strong></div></td>
                    <td><div align="center"><strong>&radic;</strong></div></td>
                  </tr>
                <tr>
                  <th scope="row"><span class="style2">* </span>LAPACK-3.1.1</th>
                    <td align="center"><div align="center"><strong>&radic;</strong></div></td>
                    <td><div align="center"><strong>&radic;</strong></div></td>
                    <td><div align="center"><strong>&radic;</strong></div></td>
                    <td><div align="center"><strong>&radic;</strong></div></td>
                    <td><div align="center"><strong>&radic;</strong></div></td>
                  </tr>
                <tr>
                  <th scope="row">BUFR</th>
                    <td align="center"><div align="center"><strong>&radic;</strong></div></td>
                    <td><div align="center"><strong>&radic;</strong></div></td>
                    <td><div align="center"><strong>&radic;</strong></div></td>
                    <td><div align="center"><strong>&radic;</strong></div></td>
                    <td><div align="center"><strong>&radic;</strong></div></td>
                  </tr>
                <tr>
                  <th scope="row">CRTM</th>
                    <td align="center"><div align="center"><strong>&radic;</strong></div></td>
                    <td><div align="center"><strong>&radic;</strong></div></td>
                    <td><div align="center"><strong>&radic;</strong></div></td>
                    <td><div align="center"><strong>&radic;</strong></div></td>
                    <td><div align="center"><strong>&radic;</strong></div></td>
                  </tr>
                <tr>
                  <th scope="row">RTTOV</th>
                    <td align="center"><div align="center"><strong>&radic;</strong></div></td>
                    <td><div align="center"><strong>&radic;</strong></div></td>
                    <td><div align="center"><strong>&radic;</strong></div></td>
                    <td><div align="center"><strong>&radic;</strong></div></td>
                    <td><div align="center"><strong>&radic;</strong></div></td>
                  </tr>
                <tr>
                  <th scope="row">MADIS</th>
                    <td align="center"><div align="center"></div></td>
                    <td><div align="center"></div></td>
                    <td><div align="center"></div></td>
                    <td><div align="center"></div></td>
                    <td><div align="center"></div></td>
                  </tr>
                </table>
              </div>
            <p align="left" class="style1">* The mandatory libraries for WRFDA</p>
          </blockquote>
          <p align="left">&nbsp;</p>
          <p align="left" class="pagetitle">WRF Var Version 3.1: </p>
            
            
            <blockquote><h2 align="left">&nbsp;</h2>
              <h2 align="left">Supported and tested platforms:</h2>
              <div align="center">
                <table width="100%" border="1" align="center" cellpadding="1" cellspacing="1">
                  <tr>
                    <th width="171" scope="col">&nbsp;</th>
                    <th width="99" align="center" scope="col">xlf</th>
                    <th width="83" scope="col"><div align="center">pgi</div></th>
                    <th width="144" scope="col"><div align="center">g95 (gcc version 4.0.3 (g95 0.91!) </div></th>
                    <th width="141" scope="col"><div align="center">
                      <p>gfortran(v4.3 above)</p>
                      </div></th>
                    <th width="126" scope="col"><div align="center">intel</div></th>
                  </tr>
                  <tr>
                    <th scope="row">IBM</th>
                    <td align="center"><div align="center">Yes</div></td>
                    <td><div align="center">-</div></td>
                    <td><div align="center">-</div></td>
                    <td><div align="center">-</div></td>
                    <td><div align="center">-</div></td>
                  </tr>
                  <tr>
                    <th scope="row">Linux</th>
                    <td align="center"><div align="center">-</div></td>
                    <td><div align="center">Yes</div></td>
                    <td><div align="center">-</div></td>
                    <td><div align="center">Yes</div></td>
                    <td><div align="center">Yes</div></td>
                  </tr>
                  <tr>
                    <th scope="row">Mac Intel</th>
                    <td align="center"><div align="center">-</div></td>
                    <td><div align="center">Yes</div></td>
                    <td><div align="center">Yes</div></td>
                    <td><div align="center">-</div></td>
                    <td><div align="center">Pending</div></td>
                  </tr>
                  <tr>
                    <th scope="row">Mac PowerPC</th>
                    <td align="center"><div align="center">Yes</div></td>
                    <td><div align="center">N/A</div></td>
                    <td><div align="center">Yes</div></td>
                    <td><div align="center">-</div></td>
                    <td><div align="center">-</div></td>
                  </tr>
                  <tr>
                    <th scope="row">SGI Altix</th>
                    <td align="center"><div align="center">-</div></td>
                    <td><div align="center">-</div></td>
                    <td><div align="center">-</div></td>
                    <td><div align="center">-</div></td>
                    <td><div align="center">Yes</div></td>
                  </tr>
                              </table>
              </div>
              <p align="left">&nbsp;</p>
              <p align="left"> &gt; ./configure wrfda<br>
                serial means single processor<br>
              dmpar means Distributed Memory Parallel</p>
              <p align="left"><br>
                &gt; ./compile all_wrfvar<br>
                ls -ls var/da/*.exe<br>
                If the compilation was successful, da_wrfvar.exe, da_update_bc.exe, and other executables should be found in the var/da directory.</p>
              <h2 align="left">&nbsp;</h2>
            </blockquote>
            <p align="left" class="detailtextRed"> 
              <script language="JavaScript">

<!--

document.write("updated " + document.lastModified);

// -->

                        </script>
              <br>
              <br>
          </p></td>
        </tr>

      <tr valign="top">

          <td height="2" colspan="3" bgcolor="#FFCC66"><img src="images/transgif.gif" width="1" height="1"></td>
        </tr>

    </table></td>
  </tr>

  <tr>

    <td height="50" valign="bottom" bgcolor="#009933"><div align="center" class="detailtext"><a href="/wrf/users/index.html

" class="detailtext">Home</a> -- <a href="/wrf/users/model.html">Analysis

          System</a> -- <a href="/wrf/users/support.html">User Support</a> -- <a href="/wrf/users/pub-doc.html">Doc

    / Pub</a> -- <a href="/wrf/users/links.html">Links</a> -- <a href="/wrf/users/downloads.html">Download</a></div></td>
  </tr>
</table>

</body>

</html>

