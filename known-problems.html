<html>

<head>

<title>WRFDA Known Problems and Fixes</title>

<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">

<meta name="KEYWORDS" content="meteorology, mesoscale, microscale, weather modeling, forecasting weather, weather prediction, predictability, cloud systems, boundary layers, surface-atmosphere interactions, convective cloud systems, atmospheric chemistry, precipitating weather systems, wildfire research, National Center for Atmospheric Research">

<meta name="DESCRIPTION" content="WRF Mesoscale Model Users homepage">

<meta name="ROBOTS" content="INDEX,FOLLOW">

<meta name="resource-type" content="document">

<meta http-equiv="expires" content="0">

<meta name="author" content="MMM Webmaster">

<meta name="copyright" content="Copyright (c) 2015 by UCAR">

<meta name="revisit-after" content="1 days">

<meta name="distribution" content="Global">

<meta name="rating" content="General">





<SCRIPT language=JavaScript src="scripts/menu_array.js" type=text/javascript></SCRIPT>

<SCRIPT language=JavaScript src="scripts/mmenu.js" type=text/javascript></SCRIPT>





<link href="../images/wrfstyle.css" rel="stylesheet" type="text/css">
<style type="text/css">
<!--
.style2 {
	font-family: Arial, Helvetica, sans-serif;
	font-size: 10pt;
}
.style3 {font-size: 14px}
-->
</style>
<link href="images/wrfstyle.css" rel="stylesheet" type="text/css">
</head>



<body bgcolor="#FFFFFF" background="../images/back2.jpg" link="#000099" vlink="#000099" alink="#FF3300" leftmargin="0" topmargin="0" marginwidth="0" marginheight="0">

<table width="100%" border="0" cellspacing="0" cellpadding="0">

  <tr bgcolor="#000000">

    <td height="10" bgcolor="#000000"><div align="left"><img src="images/transgif.gif" width="1" height="1"></div>

    </td>

  </tr>

  <tr valign="top">

    <td height="10" bgcolor="#DDFFDD"><img src="images/header_new_cropped.png" height="56" border="0"></td>

  </tr>

  <tr bgcolor="#FFCC33">

    <td height="6" background="images/goldrule.jpg" bgcolor="#009933"><img src="images/goldrule.jpg" width="1" height="1"></td>

  </tr>

  <tr>

    <td height="34" bgcolor="#009933">&nbsp;</td>

  </tr>

  <tr>

    <td height="2" bgcolor="#ffcc66"><img src="images/transgif.gif" width="1" height="1"></td>

  </tr>

</table>

<table width="100%" height="89%" border="0" cellpadding="0" cellspacing="0" class="background">

  <tr>

    <td height="1739" valign="top" bgcolor="#CBFFCD"><table width="900" border="0" cellpadding="0" cellspacing="0">

      <tr valign="top">

        <td width="120" height="1739" bgcolor="#009933"><p>&nbsp;</p>

          <table width="130" border="0" align="center" cellpadding="0" cellspacing="0">

            <tr>
              <p align="center"><a href="support.html" class="leftnavlink">WRFDA community support</a></p>
              <p align="center" style="border-width: 5px;border-style: solid;border-color: #CBFFCD;background-color: #CBFFCD;font-family: Arial; line-height: 10pt; font-size: 9pt; font-weight: bold;">Known problems and solutions</p>
              <p align="center"><a href="requirements.html" class="leftnavlink">System requirements</a></p>
              <p align="center"><a href="wrfhelp.html" class="leftnavlink">About wrfhelp</a></p>
              <p align="center"><a href="wrfnews.html" class="leftnavlink">wrf-news list</a></p>
              <p align="center"><a href="wrfusers.html" class="leftnavlink">wrf-users list</a></p>
              <p align="center"><a href="regist.html" class="leftnavlink">Becoming a registered user</a></p>
              <p align="center"><a href="workshop.html" class="leftnavlink">WRF Workshop</a></p>
              <p align="center"><a href="tutorial.html" class="leftnavlink">WRFDA Tutorials</a></p>
              <p align="center"><a href="usersguide.html" class="leftnavlink">Users' Guide</a></p>
            </tr>
          </table>

          <p>&nbsp;</p>          
          <p>&nbsp;</p></td>

          <td width="660" height="1739" colspan="2" bgcolor="#CBFFCD"><p>&nbsp;</p>
            <p class="pagetitle">Known bugs and solutions (if available)</p>
            <p class="bodytext"><b>NOTE: if you are running WRFDA on the Yellowstone machine and your problem is not listed on this page, <a href="yellowstone.html">click here</a>.</b><br><br></p>
            <p class="bodytext">Before installing WRFDA, ensure your system meets the <a href="requirements.html">minimum requirements</a>. <br></p>
            <p class="bodytext">If your issue is not found on this page, please contact <a href="wrfhelp.html">wrfhelp</a> for assistance.<br><br></p>
            <blockquote>
              <blockquote><ul class="bodytext"><li><a href="#V3_7">Version 3.7</a>
                  <ul><li><a href="#V3_7_compile">Compilation errors</a></li>
                  <li><a href="#V3_7_run">Run-time errors</a></li>
                  </ul></li>
                <li><a href="#V3_6_1">Version 3.6.1</a></li>
                <li><a href="#V3_6">Version 3.6</a></li>
                  <ul><li><a href="#V3_6_compile">Compilation errors</a></li>
                  <li><a href="#V3_6_run">Run-time errors</a></li>
                  </ul></li>
                <li><a href="#V3_5">Version 3.5</a></li>
                <li><a href="#V3_4">Version 3.4</a></li>
                <li><a href="#V3_3">Version 3.3</a></li>
                <li><a href="#V3_2">Version 3.2</a></li>
                <li><a href="#V3_1">Version 3.1</a></li>
                <li><a href="#V3_0">Version 3.0</a></li>
                <li><a href="#compilers">Bad compilers</a></li></ul><br></blockquote></blockquote>
            <a name="V3_7"></a><p class="pagetitle">WRFDA Version 3.7 : Known Problems and Fixes</p>
            <blockquote>
            <a name="V3_7_compile"><p class="pagetitle">Compilation Errors</p>
            <h1> Problems with PGI compilers (posted 2015-04-21) </h1>
            <p class="bodytext"><strong>Problem: </strong><br>
               There are several known issues with WRFDA compiled with PGI compilers:</p>
               <blockquote><ul class="bodytext"><li>Certain 4DVAR tests fail</li>
                   <li>Bit-for-bit reproducability errors with PGI version 13.3, 13.9, and possibly others</li>
                   <li>PGI version 14+: 4DVAR compilation fails</li></ul></blockquote>
            <p class="bodytext"><strong>No solution available at this time; use another compiler if possible</strong></p>
            <a name="V3_7_run"><p class="pagetitle">Run-time Errors</p>
            <h1> Errors and bad results with the "rttov_emis_atlas_ir" option (posted 2015-08-12) </h1>
            <p class="bodytext"><strong>Problem: </strong><br>
               For 4DVAR radiance assimilation with RTTOV, using the <kbd>rttov_emis_atlas_ir=1</kbd> option can cause WRFDA to crash, and even if it does not crash the results are likely bad.</p>
            <p class="bodytext"><strong>Solution:</strong><br>
               Replace the file <code>WRFDA/var/da/da_radiance/da_get_innov_vector_rttov.inc</code> with this copy: (<a href="fixes/v37/da_get_innov_vector_rttov.inc">da_get_innov_vector_rttov.inc</a>). Then recompile WRFDA.</p>
            <h1> Bad results with new "use_radar_rqv" option (posted 2015-05-19) </h1>
            <p class="bodytext"><strong>Problem: </strong><br>
               In certain weather regimes (especially tropical), radar assimilation with <kbd>use_radar_rqv=.true.</kbd> will incorrectly result in no clouds.</p>
            <p class="bodytext"><strong>Solution:</strong><br>
               Replace the file <code>WRFDA/var/da/da_radar/da_get_innov_vector_radar.inc</code> with this copy: (<a href="fixes/v37/da_get_innov_vector_radar.inc">da_get_innov_vector_radar.inc</a>). Then recompile WRFDA.</p>
            </blockquote>
            <a name="V3_6_1"></a><p class="pagetitle">WRFDA Version 3.6.1 : Known Problems and Fixes</p>
            <blockquote>
            <h1> Failure to compile with RTTOV 11.2 (posted 2014-10-17) </h1>
            <p class="bodytext"><strong>Problem: </strong><br>
               When using RTTOV 11.2, WRFDA fails to compile with the following (or similar) error message:<br><br>
               <code>ld: cannot find -lrttov11.1.0_coef_io</code><br></p>
            <p class="bodytext"><strong>Solution:</strong><br>
               Replace the file <code>WRFDA/compile</code> with this copy: (<a href="fixes/v361/compile">compile</a>). Then run "<code>./clean -a</code>" and recompile.</p>
            </blockquote>
            <a name="V3_6"></a><p class="pagetitle">WRFDA Version 3.6 : Known Problems and Fixes</p>
            <blockquote>
            <a name="V3_6_compile"><p class="pagetitle">Compilation Errors</p>
            <h1> Failure to compile with RTTOV 11.2 (posted 2014-10-17) </h1>
            <p class="bodytext"><strong>Problem: </strong><br>
               When using RTTOV 11.2, WRFDA fails to compile with the following (or similar) error message:<br><br>
               <code>ld: cannot find -lrttov11.1.0_coef_io</code><br></p>
            <p class="bodytext"><strong>Solution:</strong><br>
               Replace the file <code>WRFDA/compile</code> with this copy: (<a href="fixes/v36/compile">compile</a>). Then run "<code>./clean -a</code>" and recompile.</p>
            <h1> "Unable to open MODULE file da_grid_definitions.mod" (posted 2014-07-23) </h1>
            <p class="bodytext"><strong>Problem: </strong><br>
               WRFDA fails to compile with the following (or similar) error message:<br><br>
               <code>Unable to open MODULE file da_grid_definitions.mod</code><br></p>
            <p class="bodytext"><strong>Solution:</strong><br>
               Replace the file <code>WRFDA/var/build/depend.txt</code> with this copy: (<a href="fixes/v36/depend.txt">depend.txt</a>). Then run "<code>./clean -a</code>" and recompile.</p>
            <h1> Problems compiling on Mac OS X 10.9 (Mavericks) and potentially other systems (posted 2014-05-27) </h1>
            <p class="bodytext"><strong>Problem: </strong><br>
               WRFDA fails to compile, returning the following message at or near the end of the compilation log:<br><br>
               <code>Undefined symbols for architecture x86_64:<br>
               &nbsp; "_irev_", referenced from:<br>
               &nbsp; &nbsp; &nbsp; _ipkm_ in libbufr.a(ipkm.o)<br>
               &nbsp; &nbsp; &nbsp; _pkb_ in libbufr.a(pkb.o)<br>
               &nbsp; &nbsp; &nbsp; _pkc_ in libbufr.a(pkc.o)<br>
               &nbsp; &nbsp; &nbsp; _iupm_ in libbufr.a(iupm.o)<br>
               &nbsp; &nbsp; &nbsp; _upbb_ in libbufr.a(upbb.o)<br>
               &nbsp; "_wrdlen_", referenced from:<br>
               &nbsp; &nbsp; &nbsp; _openbf_ in libbufr.a(openbf.o)<br>
               &nbsp; &nbsp; &nbsp; _iupbs01_ in libbufr.a(iupbs01.o)<br>
               &nbsp; &nbsp; &nbsp; _iupbs3_ in libbufr.a(iupbs3.o)<br>
               ld: symbol(s) not found for architecture x86_64<br>
               collect2: error: ld returned 1 exit status<br>
               make[2]: [obsproc.exe] Error 1 (ignored)<br></code></p>
            <p class="bodytext"><strong>Solution:</strong><br>
               Please download and untar the following tar file (<a href="fixes/v36/bufr.tar">bufr.tar</a>), which contains a directory named "bufr". Delete the directory "WRFDA/var/external/bufr" and replace it with the new "bufr" directory. Then run "<code>./clean -a</code>" and recompile.</p>
            <h1> Problems compiling with PGI fortran (posted 2014-05-02, updated 2014-07-27) </h1>
            <p class="bodytext"><strong>Problem: </strong><br>
               Compilation fails with the message "PGF90-S-0155-Kind type parameter component does not have a corresponding type parameter specifier - n_layers (NLTECoeff_Define.f90: 125)". This specific error has been seen in PGI version 13.3 and 13.6.</p>
            <p class="bodytext"><strong>Solution:</strong><br>
               Replace the file "WRFDA/var/external/crtm_2.1.3/libsrc/NLTECoeff_Define.f90" with this copy: (<a href="fixes/v36/NLTECoeff_Define.f90">NLTECoeff_Define.f90</a>). Then run "<code>./clean -a</code>" and recompile.</p>
            <p class="bodytext"><strong>Problem: </strong><br>
               Compilation with version 12.5 fails with internal compiler error<br>Compilation with version 13.9 fails with assembler error</p>
            <p class="bodytext"><b>These are problems with the pgf90 compiler itself; we do not have a fix at this time.</b>


            <a name="V3_6_run"><p class="pagetitle">Run-time Errors</p>
            <h1> Error writing final output when assimilating PREPBUFR data (posted 2014-08-08) </h1>
            <p class="bodytext"><strong>Problem: </strong><br>
             WRFDA fails after the minimization step with the following error:<br><br>
             <code>&nbsp;---------------------------- FATAL ERROR -----------------------<br>
             &nbsp;Fatal error in file: &lt;A HREF="http://www2.mmm.ucar.edu/people/wrfhelp/wrfvar/cod<br>
             &nbsp;e/trunk/da_read_omb_tmp.html"&gt;da_read_omb_tmp.inc&lt;/a&gt; &nbsp;LINE: &nbsp; &nbsp; 412<br>
             &nbsp;Got unknown obs_type string: &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 1 on unit &nbsp;26<br>
             &nbsp;----------------------------------------------------------------<br>
             wrf_abort</code><br><br>
             This error may be seen when assimilating PREPBUFR data. The error has only been seen when running serially, but it may occur in parallel runs as well.</p>
            <p class="bodytext"><strong>Solution:</strong><br>
             Replace the file "WRFDA/var/da/da_obs_io/da_read_obs_bufr.inc" with this copy: (<a href="fixes/v36/da_read_obs_bufr.inc">da_read_obs_bufr.inc</a>). Then run "<code>./clean -a</code>" and recompile.</p>
            <h1> Problems with 4DVAR radiance assimilation using RTTOV (posted 2014-07-27) </h1>
            <p class="bodytext"><strong>Problem: </strong><br>
             Assimilation fails while calculating innovation vector. May either fail with an error ("profile deallocation error"), a segmentation fault or hang indefinitely. Last message printed to the rsl.out files is usually "Calculate innovation vector(iv)" or messages related to "VARBC".</p>
            <p class="bodytext"><strong>Solution:</strong><br>
             Replace the file "WRFDA/var/da/da_radiance/da_get_innov_vector_rttov.inc" with this copy: (<a href="fixes/v36/da_get_innov_vector_rttov.inc">da_get_innov_vector_rttov.inc</a>). Then run "<code>./clean -a</code>" and recompile.</p>
            <h1> Problems reading LITTLE_R files in OBSPROC (posted 2014-06-23) </h1>
            <p class="bodytext"><strong>Problem: </strong><br>
               OBSPROC fails to read LITTLE_R files, with one of the following (or similar) error messages:<br><br>
               <code>forrtl: severe (64): input conversion error, unit -5, file Internal Formatted Read<br>
               Fortran runtime error: Bad value during integer read<br>
               PGFIO-F-231/formatted read/internal file/error on data conversion.</code><br></p>
            <p class="bodytext"><strong>Solution:</strong><br>
               Download and untar the following tar file (<a href="fixes/v36/obsproc.tar">obsproc.tar</a>), which contains a directory named "obsproc". Delete the directory "WRFDA/var/obsproc" and replace it with the new "obsproc" directory. Then run "<code>./clean -a</code>" and recompile.</p>
            <h1> Problems with SEVIRI radiance assimilation (posted 2014-05-16) </h1>
            <p class="bodytext"><strong>Problem: </strong><br>
               WRFDA fails when SEVIRI data is assimilated. May either fail with an error such as a segmentation fault or hang indefinitely.</p>
            <p class="bodytext"><strong>Solution:</strong><br>
               Replace the following two files: </p>
               <blockquote><ul class="bodytext"><li>"WRFDA/var/da/da_obs_io/da_read_y_unit.inc" with this copy: (<a href="fixes/v36/da_read_y_unit.inc">da_read_y_unit.inc</a>).</li>
               <li>"WRFDA/var/da/da_radiance/da_read_obs_bufrseviri.inc" with this copy: (<a href="fixes/v36/da_read_obs_bufrseviri.inc">da_read_obs_bufrseviri.inc</a>).</li></ul></blockquote>
            <p class="bodytext">Then run "<code>./clean -a</code>" and recompile.</p>
            </blockquote>


            <a name="V3_5"></a><p class="pagetitle">WRFDA Version 3.5 : Known Problems and Fixes</p>
            <blockquote>
            <h1> Compilation failure on IBM AIX platforms (posted 2015-01-14) </h1>
            <p class="bodytext"><strong>Problem: </strong><br>
               Compilation of BUFR libraries fail on IBM AIX platforms using the cc_r C compiler, with the following message:<br><br>
               <code>bort_exit.o: not found<br><br>
               make: The error code from the last command is 1.<br>
               make: Ignored error code 1 from last command.<br>
               &nbsp; &nbsp; cc_r -o bort_exit.o -c -DNOUNDERSCORE&nbsp; -DMAX_HISTORY=25 -DNMM_CORE=0 -DUNDERSCORE bort_exit.c</code></p>
            <p class="bodytext"><strong>Solution:</strong><br>
               Replace the file "var/external/bufr/Makefile" with this copy: (<a href="fixes/v35/Makefile">Makefile</a>). Then run "<code>./clean -a</code>" and recompile.
            <h1> WRFPLUS fails to compile with serial option is selected (posted 2014-01-30) </h1>
            <p class="bodytext"><strong>Problem: </strong><br>
               Compilation of WRFPLUS fails at main/module_wrf_top.f90 with message "error #6404: This name does not have a type, and must have an explicit type." (or similar error message)</p>
            <p class="bodytext"><strong>Solution:</strong><br>
               Replace the file "main/module_wrf_top.F" with this copy: (<a href="fixes/v35/module_wrf_top.F">module_wrf_top.F</a>). Then run "<code>./clean -a</code>" and recompile WRFPLUS.
            <h1> WRFDA compilation problem with some older compilers (posted 2013-04-29) </h1>
            <p class="bodytext"><strong>Problem: </strong><br>
               Compilation fails with the message "Error: Too many digits in STOP code at (1)"</p>
            <p class="bodytext"><strong>Solution:</strong><br>
               Replace the file "var/da/da_radiance/da_read_obs_bufratms.inc" with this copy: (<a href="fixes/v35/da_read_obs_bufratms.inc">da_read_obs_bufratms.inc</a>). Then run "<code>./clean -a</code>" and recompile.
            <h1> Problem reading BUFR or PREPBUFR files (posted 2009-04-09) </h1>
            <p class="bodytext"><strong>Problem: </strong><br>
               WRFDA 3.5 or earlier compiled with gfortran or ifort returns the following error message when trying to read a BUFR or PREPBUFR file:<br><br>
               **************BUFR ARCHIVE LIBRARY ABORT*****************<br>
               BUFRLIB: OPENBF - ERROR READING INPUT FILE CONNECTED TO UNIT 26<br>
               WHEN CHECKING FOR 'BUFR' IN FIRST 4 BYTES OF RECORD<br>
               **************BUFR ARCHIVE LIBRARY ABORT*****************</p>
            <p class="bodytext"><strong>Solution:</strong><br>
               See our page on <a href="readBUFR.html">Reading BUFR files</a></p>
            </blockquote>
            <a name="V3_4"></a><p class="pagetitle">WRFDA Version 3.4 : Known Problems and Fixes</p>
            <blockquote>
            <h1> gfortran "Graphite loop optimizations" error (posted 2015-05-18) </h1>
            <p class="bodytext"><strong>Problem: </strong><br>
               WRFDA fails to compile: gfortran gives the message "sorry, unimplemented: Graphite loop optimizations can only be used if the libcloog-ppl0 package is installed"</p>
            <p class="bodytext"><strong>Solution:</strong><br>
                After running the configuration script (<code>./configure wrfda</code>) edit the "<code>configure.wrf</code>" file to remove the text "-ftree-loop-linear" at or near line 115 (where the variable "FCOPTIM" is defined). Then compile WRFDA.</p>
            <h1> Problem with WRFPLUS under certain "mp_physics" settings (posted 2012-07-24) </h1>
            <p class="bodytext"><strong>Problem: </strong><br>
               WRFPlus adjoint model fails with a segmentation fault or a fatal error message "<code>subscript out of range for array head_grid%g_moist (mediation_pertmod_io.f90: 428)</code>" when <code>mp_physics =</code> any of the following: 9,10,13,14,16,17, or 18.</p>
            <p class="bodytext"><strong>Solution:</strong><br>
               Download and unpack <a href="fixes/v34/Registry.EM_COMMON.tar.gz">Registry.EM_COMMON.tar.gz</a>, and use this file to overwrite the <kbd>WRFPLUS/Registry/Registry.EM_COMMON</kbd> file. Then run "<code>./clean -a</code>" and recompile.</p>
            <h1> Problem reading BUFR or PREPBUFR files (posted 2009-04-09) </h1>
            <p class="bodytext"><strong>Problem: </strong><br>
               WRFDA 3.5 or earlier compiled with gfortran or ifort returns the following error message when trying to read a BUFR or PREPBUFR file:<br><br>
               **************BUFR ARCHIVE LIBRARY ABORT*****************<br>
               BUFRLIB: OPENBF - ERROR READING INPUT FILE CONNECTED TO UNIT 26<br>
               WHEN CHECKING FOR 'BUFR' IN FIRST 4 BYTES OF RECORD<br>
               **************BUFR ARCHIVE LIBRARY ABORT*****************</p>
            <p class="bodytext"><strong>Solution:</strong><br>
               See our page on <a href="readBUFR.html">Reading BUFR files</a></p>
            </blockquote>
            <a name="V3_3"></a><p class="pagetitle">WRFDA Version 3.3 : Known Problems and Fixes</p>
            <blockquote>
            <h1> gfortran "Graphite loop optimizations" error (posted 2015-05-18) </h1>
            <p class="bodytext"><strong>Problem: </strong><br>
               WRFDA fails to compile: gfortran gives the message "sorry, unimplemented: Graphite loop optimizations can only be used if the libcloog-ppl0 package is installed"</p>
            <p class="bodytext"><strong>Solution:</strong><br>
                After running the configuration script (<code>./configure wrfda</code>) edit the "<code>configure.wrf</code>" file to remove the text "-ftree-loop-linear" at or near line 115 (where the variable "FCOPTIM" is defined). Then compile WRFDA.</p>
            <h1> Problem with WRFPLUS, especially with PGI compiler (posted 2011-06-24) </h1>
            <p class="bodytext"><strong>Problem: </strong><br>
               The adjoint model integration fails with either a segmentation fault or the error message: <code>0: ALLOCATE: 18446744072053605056 bytes requested; not enough memory</code>.</p>
            <p class="bodytext"><strong>Solution:</strong><br>
               Download <a href="fixes/v33/module_em_tl.F">module_em_tl.F</a>, <a href="fixes/v33/module_em_ad.F">module_em_ad.F</a>, <a href="fixes/v33/module_advect_em_tl.F">module_advect_em_tl.F</a> and <a href="fixes/v33/module_advect_em_ad.F">module_advect_em_ad.F</a> and place them in the <kbd>WRFPLUS/dyn_em</kbd> directory.
               Then download <a href="fixes/configure_new.defaults">configure_new.defaults</a> and place it in the <kbd>WRFPLUS/arch</kbd> directory.</p>
            <h1> WRFPLUS compilation problem with g95 compiler for Mac OS (posted 2011-06-24) </h1>
            <p class="bodytext"><strong>Problem: </strong><br>
               WRFPLUS fails to compile when using g95 compiler for Mac OS. </p>
            <p class="bodytext"><strong>Solution:</strong><br>
               Download <code><a href="fixes/v33/adStack.c">adStack.c</a></code> and place it in the <kbd>WRFPLUS/frame</kbd> directory.</p>
            <h1> Problem with New Configure Script (posted 2011-04-08) </h1>
            <p class="bodytext"><strong>Problem: </strong><br>
               There is a problem with the new configure script on Opensuse and Ubuntu Linux. It will fail on creating configure.wrf file, and may result in file removal in the top WRFV3/ directory. If configure.wrf is successfully created, then this fix doesn't affect you. </p>
            <p class="bodytext"><strong>Solution:</strong><br>
               If files are removed from WRFV3 directory, you will have to redownload the V3.3 tar file, or re-untar the file. Then download the <a href=http://www2.mmm.ucar.edu/wrf/src/fix/configure_fix.tar>configure_fix.tar</a> file in the WRFV3 directory. This file contains a new configure script, and a new arch/configure_new.default file.</p> 
            <h1> Problem with New compile Script (posted 2011-04-08) </h1>
            <p class="bodytext"><strong>Problem: </strong><br>
               There is a problem with the new compile script on IBM AIX OS. It will complain about invalid parameters for grep if compiled with CRTM lib. </p>
            <p class="bodytext"><strong>Solution:</strong><br>
               Download the <a href=fixes/v33/compile_fix.tar>compile_fix.tar</a> file in the WRFDA directory, untar it and overwrite the old file. <br></p>
            <h1> Problem reading BUFR or PREPBUFR files (posted 2009-04-09) </h1>
            <p class="bodytext"><strong>Problem: </strong><br>
               WRFDA 3.5 or earlier compiled with gfortran or ifort returns the following error message when trying to read a BUFR or PREPBUFR file:<br><br>
               **************BUFR ARCHIVE LIBRARY ABORT*****************<br>
               BUFRLIB: OPENBF - ERROR READING INPUT FILE CONNECTED TO UNIT 26<br>
               WHEN CHECKING FOR 'BUFR' IN FIRST 4 BYTES OF RECORD<br>
               **************BUFR ARCHIVE LIBRARY ABORT*****************</p>
            <p class="bodytext"><strong>Solution:</strong><br>
               See our page on <a href="readBUFR.html">Reading BUFR files</a></p>
            </blockquote>
            <a name="V3_2"></a><p class="pagetitle">WRF Var Version 3.2 : Known Problems and Fixes</p>
            <blockquote>
            <h1> Problem reading BUFR or PREPBUFR files (posted 2009-04-09) </h1>
            <p class="bodytext"><strong>Problem: </strong><br>
               WRFDA 3.5 or earlier compiled with gfortran or ifort returns the following error message when trying to read a BUFR or PREPBUFR file:<br><br>
               **************BUFR ARCHIVE LIBRARY ABORT*****************<br>
               BUFRLIB: OPENBF - ERROR READING INPUT FILE CONNECTED TO UNIT 26<br>
               WHEN CHECKING FOR 'BUFR' IN FIRST 4 BYTES OF RECORD<br>
               **************BUFR ARCHIVE LIBRARY ABORT*****************</p>
            <p class="bodytext"><strong>Solution:</strong><br>
               See our page on <a href="readBUFR.html">Reading BUFR files</a></p>
            </blockquote>
            <a name="V3_1"></a><p class="pagetitle">WRF Var Version 3.1 : Known Problems and Fixes</p>
<!--            <p style="padding-right: 45px;padding-left: 60px;"><table width="100%" border="1" class="bodytable" style="background-color:white;"><tr><td style="text-align:center;background-color:#DDAAAA;"><b>NOTE:</b> These older versions (3.1 and earlier) are no longer supported. If you are unable to solve your problem with the solutions listed here, upgrade to a newer version of WRFDA.</td></tr></table></p>
-->
            <blockquote>
            <h1> Problem reading BUFR or PREPBUFR files (posted 2009-04-09) </h1>
            <p class="bodytext"><strong>Problem: </strong><br>
               WRFDA 3.5 or earlier compiled with gfortran or ifort returns the following error message when trying to read a BUFR or PREPBUFR file:<br><br>
               **************BUFR ARCHIVE LIBRARY ABORT*****************<br>
               BUFRLIB: OPENBF - ERROR READING INPUT FILE CONNECTED TO UNIT 26<br>
               WHEN CHECKING FOR 'BUFR' IN FIRST 4 BYTES OF RECORD<br>
               **************BUFR ARCHIVE LIBRARY ABORT*****************</p>
            <p class="bodytext"><strong>Solution:</strong><br>
               See our page on <a href="readBUFR.html">Reading BUFR files</a></p>
            <h1>Parallel WRF-Var run with PREPBUFR observational data (Posted 2009-04-09)</h1>
            <p class="bodytext"><strong>Problem: </strong><br>
               Parallel running WRFDA with PREPBUFR observational data (ob_format=1) might get hung up with no error message being printed.</p>
            <p class="bodytext"><strong>Solution:</strong><br>
               Click <a href="fixes/v31/V3_1_prepbufr_fix.tar">here</a> to download the patch</p>
            <h1>Unblock and reblock radiance BUFR data with gfortran (Posted 2009-04-09)</h1>
            <p class="bodytext"><strong>Problem: </strong><br>
               In some Linux operating systems using the gfortran compiler, the radiance BUFR data unblocked and reblocked by cwordsh might be unable to be read by WRFDA.</p>
            <p class="bodytext"><strong>Solution:</strong><br>
               Upgrade to the latest version of WRFDA</p>
            <h1>4D-Var (Posted 2009-04-09)</h1>
            <p class="bodytext"><strong>Problem: </strong><br>
               4D-Var results are unstable on some platforms.</p>
            <p class="bodytext"><strong>Solution:</strong><br>
               Upgrade to the latest version of WRFDA</p>
            <p class="bodytext">&nbsp;<br><br></p>
            </blockquote>
            <a name="V3_0"></a><p class="pagetitle">WRFDA Version 3.0 : Known Problems and Fixes</p>
<!--            <p style="padding-right: 45px;padding-left: 60px;"><table width="100%" border="1" class="bodytable" style="background-color:white;"><tr><td style="text-align:center;background-color:#DDAAAA;"><b>NOTE:</b> These older versions (3.1 and earlier) are no longer supported. If you are unable to solve your problem with the solutions listed here, upgrade to a newer version of WRFDA.</td></tr></table></p>
-->
            <blockquote>
              <h1>Minor bug fixes for version 3.0.1.1 (Posted 2009-01-09)</h1>
              <p class="bodytext"><strong>Bug fix related to check_rh=2</strong><br>
                To fix this problem a second RH check has been added after the moisture adjustment to 
                ensure the RH is within a reasonable range.<br>
                Affected files:<br>
                var/da/da_physics/da_check_rh.inc<br>
                var/da/da_physics/da_physics.f90</p>
              <p class="bodytext"><strong>Bug fix related to sfc_assi_options=1</strong><br>
                To keep original <em>(not WRF-Var &quot;corrected&quot; when sfc_assi_options=1)</em> surface pressure for writing out in gts_omb_oma and filtered_obs.<br>
                Note: when qc_flag=2, O-B <em>(Observation minus Background)</em> values are calculated from surface-&quot;corrected&quot; O, while O values written out in gts_omb_oma are original values. That means B values are unknown when qc_flag=2.<br>
                Affected files:<br>
                var/da/da_buoy/da_get_innov_vector_buoy.inc<br>
                var/da/da_metar/da_get_innov_vector_metar.inc<br>
                var/da/da_ships/da_get_innov_vector_ships.inc<br>
                var/da/da_sound/da_get_innov_vector_sonde_sfc.inc<br>
                var/da/da_synop/da_get_innov_vector_synop.inc</p>
              <p class="bodytext"><strong>Bug fix related to analysis_type = &quot;VERIFY&quot;</strong><br>
                This fix will ensure the writing out of statistics.<br>
                Affected files:<br>
                var/da/da_main/da_solve.inc<br>
                var/da/da_main/da_wrfvar_top.f90</p>
              <p class="bodytext">Bug fix to initialize jo_radiance properly when radiance code is not included.<br>
                Affected file: <br>
                var/da/da_minimisation/da_jo_and_grady.inc</p>
              <p class="bodytext"><strong>Solution:</strong>
              <p class="bodytext">Upgrade to a newer version of WRFDA (fixed in version 3.1)</p>
              <h1></h1>
              <h1>Known Problems for version 3.0.1.1 (Posted 2009-01-09)</h1>
              <p class="bodytext">WRF-Var does not work properly with NCEP PREPBUFR observations, because of the following known problems:</p>
              <p class="bodytext"> (1) pressure fields are used twice and observation numbers are double-counted because mass and wind reports are separated in NCEP PREPBUFR files.</p>
              <p class="bodytext"> (2) time-duplicate observations from fixed stations are over-used. For example, if there is more than one synop report from a surface station contained in a 6-hour time-windowed PREPBUFR file, only one report should be used. </p>
              <p class="bodytext"><em>Fixes will be available in the next release.</em><br>
              &nbsp;</p>
              <h1>
              <hr>Known Problems in Version 3.0.1 </h1>
              <h1>Compile Error using PGI 7.1+  (posted 2008-06-10) </h1>
              <p class="bodytext"><strong>Problem</strong>: Compile errors like this one occur when using PGI 7.1 or later: &quot;<kbd>PGF90-S-0000-Internal compiler error. string_expr_length: ast not string op</kbd>&quot;. </p>
              <p class="bodytext"><strong>Solution</strong>: Changes have been made to the latest WRF Var tar file to fix the problem. The problem affects the following files:<br>
                WRFDA/var/da/da_main/da_med_initialdata_input.inc<br>
                WRFDA/var/da/da_obs_io/da_read_obs_radar.inc<br>
                WRFDA/var/da/da_obs_io/da_read_omb_tmp.inc<br>
                WRFDA/var/da/da_obs_io/da_read_rand_unit.inc<br>
                WRFDA/var/da/da_obs_io/da_read_y_unit.inc<br>
                WRFDA/var/da/da_obs_io/da_scan_obs_radar.inc<br>
                WRFDA/var/da/da_ssmi/da_read_obs_ssmi.inc<br>
                WRFDA/var/da/da_ssmi/da_scan_obs_ssmi.inc<br>
                WRFDA/var/da/da_tools/da_openfile.inc<br>
                WRFDA/var/da/da_tracing/da_trace.inc<br>
                WRFDA/var/da/da_tracing/da_trace_entry.inc<br>
                WRFDA/var/da/da_tracing/da_trace_exit.inc<br>
              WRFDA/var/da/da_vtox_transforms/da_vertical_transform.inc </p>
            <h1>Compile Problem for Program obsproc (Posted 2008-06-10) </h1>
              <p class="bodytext"><strong>Problem</strong>: Compile fails on program obsproc. </p>
              <p class="bodytext"><strong>Solution</strong>: Upgrade to a newer version of WRFDA (fixed in Version 3.0.1.1 and later)</p>
            <h1>Compile Problem On IBMs (Posted 2008-06-10) </h1>
              <p class="bodytext"><strong>Problem</strong>: Compile time very long on IBMs using xlf. </p>
              <p class="bodytext"><strong>Solution</strong>: Check your configure.var file and reduce optimization level from O3 to O2. This has also been included in the updated tar file. </p>
              <p class="bodytext">&nbsp;</p>
            </blockquote>
            <a name="compilers"></a><p class="pagetitle">Bad compilers</p>
            <blockquote>
              <p class="bodytext">The following compilers have bugs that will cause some or all versions WRFDA and/or WRFPLUS to fail. If no solution is listed, you must update/downgrade to a different compiler version, or use a different compiler.</p>
            <p class="bodytext">Be sure your compiler meets the <a href="requirements.html#compilers">minimum requirements</a>. <br></p>
              <ul class="bodytext"><li>Intel (ifort) version 14.0.3 (<a href="https://software.intel.com/en-us/forums/topic/506826">details</a>).
                  <ul><li>Reducing the optimization in the <code>configure.wrf</code> file may solve this problem. Change the line "<code>FCOPTIM &nbsp; &nbsp; &nbsp; &nbsp; = &nbsp; &nbsp; &nbsp; -O3</code>" so that it instead reads "-O2" or "-O1" (note that this is a capital letter "O", not a zero)</li></ul></li>
                <li>Intel (ifort) version 11.1 (<a href="https://software.intel.com/en-us/forums/topic/269937">details</a>).
                  <ul><li><em>No solution at this time</em></li></ul></li>
                <li>PGI (pgf90) versions 13.3 &ndash; 13.6
                  <ul><li> Replace the file "WRFDA/var/external/crtm_2.1.3/libsrc/NLTECoeff_Define.f90" with this copy: (<a href="fixes/v36/NLTECoeff_Define.f90">NLTECoeff_Define.f90</a>). Then run "<code>./clean -a</code>" and recompile.</li></ul></li>
                <li>PGI (pgf90) versions 12.5, 13.9
                  <ul><li><em>No solution at this time</em></li></ul></li>
              <p>&nbsp;</p>
            </blockquote>            <p align="center" class="detailtextRed"> 
              <script language="JavaScript">

<!--

document.write("updated " + document.lastModified);

// -->

                        </script>
              <br>
              <br>
            </p></td>
        </tr>

      <tr valign="top">

          <td height="2" colspan="3" bgcolor="#FFCC66"><img src="images/transgif.gif" width="1" height="1"><img src="images/shim162.gif" width="162" height="1"></td>
        </tr>

    </table></td>
  </tr>


  <tr>

    <td height="50" bgcolor="#009933" class="detailtext">&nbsp;</td>
  </tr>
</table>

</body>

</html>

